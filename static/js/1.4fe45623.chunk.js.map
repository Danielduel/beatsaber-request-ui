{"version":3,"sources":["integrations/scoresaber/scoreSaberImportRankedMapsData.ts","common/hooks/useTwitchChannelInfo.ts","AppEnvContext.tsx","common/hooks/useTwitchExtOnAuthorized.ts","components/LayoutRow/LayoutRow.tsx","components/Buttons/Button.tsx","constants.ts","common/hooks/useStreamSubscribe.ts","common/most/createConfiguredEventHandler.ts","common/icons/InfoIcon.tsx","components/Buttons/CloseButton.tsx","components/Header/Header.tsx","common/icons/MagnifyingGlassIcon.tsx","common/styles/shadowizeFont.ts","pages/SearchPage/SearchInput.tsx","common/utils/placeholderDispatch.ts","components/SongList/SongListItemContext.ts","components/SongList/SongListItemActions.tsx","common/icons/ForwardIcon.tsx","components/SongList/SongListItemAvailableDifficulties.tsx","components/SongList/SongListItemCoverImage.tsx","components/SongList/SongListItemDetails/SongListItemDetailsCommon.tsx","components/SongList/SongListItemDetails/SongListItemDetailsWrapper.tsx","components/SongList/SongListItem.tsx","components/SongList/SongListContainer.tsx","utils.ts","pages/SearchPage/SearchList.tsx","common/hooks/usePaginatedData.ts","pages/SearchPage/SearchPage.tsx","i18n/init-i18n.ts","components/LanguageSelector/LanguageSelector.tsx","common/utils/wrapWith.tsx","pages/InfoPage/GithubLogo.tsx","pages/InfoPage/ReportIcon.tsx","pages/InfoPage/VersionIcon.tsx","pages/InfoPage/ResearchIcon.tsx","pages/InfoPage/TranslationIcon.tsx","pages/InfoPage/InfoPage.tsx","common/utils/decapitate.ts","pages/BeatfollowerPage/BeatfollowerPage.tsx","components/UnexpandedApp/UnexpandedApp.tsx","components/Footer/FooterWrapper.ts","components/Footer/Footer.tsx","App.tsx","common/hooks/useFormField.ts","serviceWorker.ts","common/hooks/useRefetchingData.ts","common/styles/hideScrollbars.ts","layouts/BodyWithNavigation.tsx","components/ScoreSaberBar/ScoreSaberBar.tsx","integrations/scoresaber/scoreSaberFetchBasicPlayerData.ts","common/utils/getScoresaberAvatarUrl.ts","components/Buttons/GroupButton.tsx","common/utils/validators.ts","common/config/BroadcasterConfiguration.ts","common/config/AppConfiguration.ts","common/hooks/useTwitchExtConfigurationOnChanged.ts","components/Header/static/beatfollower.png","components/Header/static/beatsaver.png","components/SongList/static/loading.gif","components/SongList/static/base.png","components/SongList/static/notfound.png","components/SongList/static/exclamation_mark.png","components/SongList/static/question_mark.png"],"names":["scoreSaberImportRankedMapsData","Promise","resolve","reject","then","data","catch","err","console","error","useTwitchChannelInfo","twitchExtAuth$","createConfiguredEventHandler","handler","data$","stream","useStreamSubscribe","auth","fetch","wrapTwitchApiEndoint","channelId","method","headers","clientId","helixToken","response","json","fetchTwitchChannelInfo","defaultState","frameFullvideo","frameMobile","frameConfig","framePanel","frameLive","srmBridgeChannel","userId","rankedHashes","contextGame","isLocalhost","configuration","AppEnvContext","React","createContext","createWrappedProvider","overrides","initialState","createAppEnvContextState","children","useEffect","Twitch","ext","onAuthorized","useTwitchExtOnAuthorized","twitchChannelInfo$","useState","state","setState","useRefetchingData","rankedData$","useTwitchExtConfigurationOnChanged","twitchExtConfiguration$","_oldState","channelInfo","log","game_name","rankedData","songs","filter","song","UNRANKED","includes","uid","map","hash","id","reduce","result","item","toLowerCase","Provider","value","LayoutRowBase","styled","div","LayoutRowTall","LayoutRowPrimary","LayoutRowPlaceholder","LayoutRowPlaceholderTransparent","styles","css","active","Button","button","ButtonLink","a","ButtonAsItem","buttonAsItemProps","text","kind","onClick","href","target","window","location","host","startsWith","url","_next","_complete","_error","subscription","setSubscription","next","useCallback","complete","unsubscribe","_subscription","subscribe","createEventHandlerWithConfig","mostConfig","InfoIcon","version","xmlns","x","y","width","height","viewBox","fill","d","CloseButtonContainer","CloseButton","ChildrenContainer","HeaderLinkWrapper","span","highcontrast","NavigationImage","img","small","NavigationText","NavigationLink","Link","HeaderLink","to","useLocation","pathname","Header","togglePanel","handleClose","LayoutRow","src","beatsaverLogo","beatfollowerLogo","MagnifyingGlassIcon","clipPath","shadowizeFont","PageHeaderLayoutRow","SearchButton","disabled","ClearButton","SearchInputField","input","SearchInputGroup","SearchInput","query","setQuery","submitSearch","useTranslation","t","searchInputOnChange","event","searchInputOnKeyUp","e","key","searchClearOnClick","searchSubmitOnClick","autoFocus","placeholder","onChange","onKeyUp","length","trim","placeholderDispatch","defaultContextState","copied","setCopied","askForBeatsaverNavigation","setAskForBeatsaverNavigation","lastResetingActionSetState","useResettingState","_setState","SongListItemContext","RequestButton","ForwardIconStyled","props","className","RequestButtonText","SongListItemActionGroupWrapper","SongListItemActions","bsrKey","isRanked","useContext","style","backgroundColor","body","JSON","stringify","SongListItemAvailableDifficultiesDifficultyBadge","variant","SongListItemAvailableDifficultiesWrapper","SongListItemAvailableDifficulties","easy","normal","hard","expert","expertPlus","SongListItemCoverImageWrapper","SongListItemCoverImageBackgroundWrapper","SongListItemCoverImageImg","baseImg","SongListItemCoverImageImgBg","SongListItemCoverImageLoading","SongListItemCoverImage","coverURL","loaderRef","useRef","onError","currentTarget","notfoundImg","current","opacity","onLoad","toggleAskForBeatsaverNavigation","ref","loadingGif","SongListItemCoverImageBackground","transform","marginTop","SongListItemDetailsSpan","SongListItemDetailsCommon","WrapperComponent","memoRender","suffix","_SongListItemDetailsFullwidthItem","SongListItemDetailsFullwidthItem","_SongListItemDetailsSmallItem","SongListItemDetailsSmallItem","repeat","number","stringToRepeat","Array","join","dots","SongListItemDetailsWrapper","SongListItemWrapper","SongListItemContainer","moveToLeft","SongListItemInfoWrapper","SongListItemInfoBgImage","SongListItemDetailsContainer","SongListItemCoverWrapper","SongListItem","songName","songAuthorName","levelAuthorName","downloads","upVotes","downVotes","percentVotes","isQualified","componentContextState","useSongListItemContextState","shouldMoveToLeft","exclamation_mark","question_mark","GroupButton","group","SongListContainer","hideScrollbars","stringTLC","s","toLocaleLowerCase","autoMappersTLC","isCreatedByAutomapper","songNameTLC","songAuthorNameTLC","levelAuthorNameTLC","some","autoMapperTLC","_ItemList","documentList","renderedItems","docData","allvotes","stats","upvotes","downvotes","lastVersion","versions","metadata","diffs","diff","difficulty","getDiffs","ranked","qualified","SearchList","usePaginatedData","getUrl","flatMapResponseArrToItemArr","options","pageNumber","setPageNumber","newPage","setNewPage","pages","setPages","isFetching","setIsFetching","isError","setIsError","results","setResults","clearData","fetchPage","page","res","initialFetch","initialPageNumber","fetchNextPage","SearchPageFetchMoreButtonWrapper","SearchPageFetchMoreButton","SearchPageWrapper","SearchPageFixedMessageWrapper","mapResponsesToItems","flatMap","docs","flat","SearchPage","wasSearching","setWasSearching","message","isSearching","songList","getMessage","resources","en","translation","pl","languages","Object","keys","i18n","use","LanguageDetector","initReactI18next","init","fallbackLng","debug","interpolation","escapeValue","Wrapper","LanguageSelectContainer","StyledSelect","select","StyledOption","option","StyledSelectLabel","LanguageSelector","i18nInstance","getI18n","selectRef","useFormField","language","newLanguage","changeLanguage","blur","selectOnChange","sinkEvent","selectedLanguage","getFixedT","StyledOptionItem","GithubLogo","xmlnsXlink","enableBackground","xmlSpace","ReportIcon","strokeWidth","stroke","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","VersionIcon","ResearchIcon","cx","cy","r","TranslationIcon","wrapWithLi","index","InfoPageWrapper","InfoIconWrapper","InfoRow","_LinkWrapper","link","infoRows","rows","fn","items","head","tail","ul","renderInfoRowArr","infoRowItemArr","icon","content","intersperse","InfoPageContent","InfoPage","BeatfollowerPageContainer","SubnavigationContainer","_data","Item","ItemList","Consumer","context","BeatfollowerPage","tab","setTab","newTab","conditionalCssDependingOnPosition","top","bottom","left","right","merge","AppUnexpandedWrapperWrapper","AppUnexpandedWrapper","isNaN","AppUnexpandedTooltip","h","v","UnexpandedApp","panelPosition","broadcaster","FooterWrapper","shouldRenderFooter","Footer","scoreSaber","ScoreSaberBar","scoreSaberId","AppWrapper","Navigation","Routing","BodyWithNavigation","exact","path","MainApp","useLayoutEffect","document","background","FullVideoApp","isExpanded","setExpanded","MobileApp","PanelApp","getGetValueFromEvent","eventToBindTo","initialValue","onEvent","_setValue","dirty","setDirty","setValue","getValueFromEvent","useMemo","transformedValue","Boolean","hostname","match","process","unregister","navigator","serviceWorker","ready","registration","fetchData","fetchDataCb","BodyWithNavigationBody","ScoreSaberBarWrapper","ScoreSaberBarWrapperNoResults","ScoreSaberBarPlayerAvatar","ScoreSaberBarPlayerDataContainer","ScoreSaberBarPlayerName","ScoreSaberBarPlayerRanking","ScoreSaberBarPlayerPP","ScoreSaberBarPlayerActionContainer","ScoreSaberBarPlayerReload","_ScoreSaberBar","playerId","withoutReload","scoreSaberBasicPlayerData","setScoreSaberBasicPlayerData","scoreSaberBasicPlayerData$","refetchScoreSaberBasicPlayerData","playerInfo","avatarUrl","avatar","playerName","rank","country","countryRank","pp","emojiFlag","emojiFlags","countryCode","emoji","GroupButtonContainer","beString","String","beProperNumber","n","panelPositionBroadcasterConfigurationValidator","allowedRange","ruleFor","notNull","must","inclusiveBetween","Validator","scoreSaberBroadcasterConfigurationValidator","maxLength","broadcasterConfigurationValidator","setValidator","unless","config","scoreSaberEnabled","appConfigurationValidator","equal","createAppConfigurationFromConfigs","developer","global","validationResult","validate","configKey","setTimeout","onChanged","newConfig","extConfig","broadcasterObject","broadcasterContent","parse","_","deserializeTwitchExtConfiguration","module","exports"],"mappings":"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","file":"static/js/1.4fe45623.chunk.js","sourcesContent":["import { UNRANKED } from \"../../constants\";\nimport { ScoreSaber } from \"./scoreSaberTypes\";\n\nexport type RankedRecordMap = Record<string, unknown>;\n\nconst transformRankedResponse = (response: ScoreSaber.RankedListResponse): RankedRecordMap => {\n  const intermediateData = response.songs\n    .filter((song) => !UNRANKED.includes(song.uid))\n    .map((song) => ({ hash: song.id }));\n\n  return intermediateData.reduce(\n    (result, item) => ({\n      ...result,\n      [item.hash.toLowerCase()]: {}\n    }),\n    {}\n  );\n};\n\nconst scoreSaberImportRankedMapsData = (): Promise<ScoreSaber.RankedListResponse> =>\n  new Promise<ScoreSaber.RankedListResponse>((resolve, reject) =>\n    // fetch(\"https://scoresaber.com/api.php?function=get-leaderboards&cat=1&limit=9999&ranked=1&page=1\")\n    // scoresaber has cors policy on this resource, loading that dynamically per version\n    import(\"../../types/RankedListResponseMock.json\")\n      .then((data) => resolve(data as ScoreSaber.RankedListResponse))\n      .catch((err) => {\n        console.error(err);\n        reject(err);\n      })\n  );\n\nexport { scoreSaberImportRankedMapsData, transformRankedResponse };\n","import { wrapTwitchApiEndoint } from \"../../constants\";\nimport { AuthResponse } from \"../../types/AuthResponse\";\nimport { ChannelInfoResponse } from \"../../types/ChannelInfoResponse\";\nimport { createConfiguredEventHandler } from \"../most/createConfiguredEventHandler\";\nimport { useStreamSubscribe } from \"./useStreamSubscribe\";\nimport { TwitchExtAuthStream } from \"./useTwitchExtOnAuthorized\";\n\nconst fetchTwitchChannelInfo = (auth: AuthResponse): Promise<ChannelInfoResponse> => {\n  return new Promise((resolve, reject) => {\n    return fetch(wrapTwitchApiEndoint(`/helix/channels?broadcaster_id=${auth.channelId}`), {\n      method: \"GET\",\n      headers: {\n        \"Accept\": \"application/vnd.twitchtv.v5+json\",\n        \"Client-Id\": auth.clientId,\n        \"Authorization\": \"Extension \" + auth.helixToken\n      }\n    })\n      .then((response) => response.json())\n      .then((data) => resolve(data))\n      .catch((err) => {\n        console.error(err);\n        return reject(null);\n      });\n  });\n};\n\nfunction useTwitchChannelInfo(twitchExtAuth$: TwitchExtAuthStream) {\n  const { handler, stream: data$ } = createConfiguredEventHandler<ChannelInfoResponse>();\n  useStreamSubscribe(twitchExtAuth$, (auth) => {\n    fetchTwitchChannelInfo(auth).then(handler);\n  });\n\n  return [data$] as const;\n}\n\nexport { useTwitchChannelInfo, fetchTwitchChannelInfo };\n","import React, { PropsWithChildren } from \"react\";\nimport { isLocalhost } from \"./constants\";\nimport {\n  RankedRecordMap,\n  scoreSaberImportRankedMapsData,\n  transformRankedResponse\n} from \"./integrations/scoresaber/scoreSaberImportRankedMapsData\";\nimport { useRefetchingData } from \"./common/hooks/useRefetchingData\";\nimport { useTwitchExtOnAuthorized } from \"./common/hooks/useTwitchExtOnAuthorized\";\nimport { useTwitchChannelInfo } from \"./common/hooks/useTwitchChannelInfo\";\nimport { useStreamSubscribe } from \"./common/hooks/useStreamSubscribe\";\nimport { useTwitchExtConfigurationOnChanged } from \"./common/hooks/useTwitchExtConfigurationOnChanged\";\nimport { AppConfiguration } from \"./common/config/AppConfiguration\";\n\nconst defaultState = {\n  frameFullvideo: false,\n  frameMobile: false,\n  frameConfig: false,\n  framePanel: false,\n  frameLive: false,\n  srmBridgeChannel: null as string | null,\n  userId: null as string | null,\n  rankedHashes: {} as RankedRecordMap,\n  contextGame: isLocalhost ? \"Beat Saber\" : \"\",\n  configuration: null as AppConfiguration | null\n};\n\nexport type AppEnv = typeof defaultState;\nexport type PartialAppEnv = Partial<AppEnv>;\n\nexport const createAppEnvContextState = (overrides: PartialAppEnv): AppEnv => ({\n  ...defaultState,\n  ...overrides\n});\n\nconst AppEnvContext = React.createContext(defaultState);\n\nexport function createWrappedProvider(overrides: PartialAppEnv) {\n  const initialState = createAppEnvContextState(overrides);\n\n  return function WrappedProvider({ children }: PropsWithChildren<Record<string, unknown>>): JSX.Element {\n    const [twitchExtAuth$] = useTwitchExtOnAuthorized();\n    const [twitchChannelInfo$] = useTwitchChannelInfo(twitchExtAuth$);\n    const [state, setState] = React.useState(initialState);\n    const [rankedData$] = useRefetchingData(scoreSaberImportRankedMapsData);\n    const [twitchExtConfiguration$] = useTwitchExtConfigurationOnChanged();\n\n    useStreamSubscribe(twitchExtAuth$, (auth) => {\n      setState((_oldState) => ({ ..._oldState, srmBridgeChannel: auth.channelId, userId: auth.userId }));\n    });\n\n    useStreamSubscribe(twitchChannelInfo$, (channelInfo) => {\n      console.log(\"channelInfo\", channelInfo);\n      // defensive code, not sure how stable this api is\n      if (channelInfo && channelInfo.data && channelInfo.data[0] && channelInfo.data[0].game_name) {\n        setState((_oldState) => ({ ..._oldState, contextGame: channelInfo.data[0].game_name }));\n      }\n    });\n\n    useStreamSubscribe(rankedData$, (rankedData) => {\n      const rankedHashes = transformRankedResponse(rankedData);\n      setState((_oldState) => ({ ..._oldState, rankedHashes }));\n    });\n\n    useStreamSubscribe(twitchExtConfiguration$, (configuration) => {\n      setState((_oldState) => ({ ..._oldState, configuration }));\n    });\n\n    return <AppEnvContext.Provider value={state}>{children}</AppEnvContext.Provider>;\n  };\n}\n\nexport default AppEnvContext;\n","import { Stream } from \"most\";\nimport React from \"react\";\nimport { AuthResponse } from \"../../types/AuthResponse\";\nimport { createConfiguredEventHandler } from \"../most/createConfiguredEventHandler\";\n\ntype TwitchExtAuthStream = Stream<AuthResponse>;\n\nfunction useTwitchExtOnAuthorized(): readonly [TwitchExtAuthStream] {\n  // not sure if app can miss auth event due to loading time\n  // but I don't know how to handle it without hacks atm\n  // so if somebody (most likely me) will have problems with\n  // auth being not populated - this is most likely the issue\n\n  const { handler, stream: data$ } = createConfiguredEventHandler<AuthResponse>();\n\n  React.useEffect(() => {\n    Twitch.ext.onAuthorized((auth: Twitch.ext.Authorized) => {\n      handler(auth as AuthResponse);\n    });\n  }, []);\n\n  return [data$] as const;\n}\n\nexport { useTwitchExtOnAuthorized };\nexport type { TwitchExtAuthStream };\n","import styled from \"styled-components\";\n\nconst LayoutRowBase = styled.div`\n  width: min(100vw, 500px);\n  height: 52px;\n  background-color: var(--background);\n  box-sizing: border-box;\n  position: relative;\n`;\n\nconst LayoutRowTall = styled.div`\n  width: min(100vw, 500px);\n  min-height: 95px;\n  padding: 3px 0;\n  background-color: var(--background);\n  box-sizing: border-box;\n  position: relative;\n  overflow: hidden;\n`;\n\nconst LayoutRowPrimary = styled(LayoutRowBase)`\n  background-color: var(--background-primary);\n`;\n\nconst LayoutRowPlaceholder = styled(LayoutRowBase)`\n  font-size: 50px;\n  padding-top: 50px;\n  color: var(--background-primary);\n  font-weight: bolder;\n  text-align: center;\n  align-self: flex-start;\n`;\n\nconst LayoutRowPlaceholderTransparent = styled(LayoutRowPlaceholder)`\n  background-color: transparent;\n`;\n\nexport { LayoutRowBase, LayoutRowPrimary, LayoutRowPlaceholder, LayoutRowTall, LayoutRowPlaceholderTransparent };\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\ntype ButtonProps = {\n  active?: boolean;\n};\nconst styles = css`\n  outline: none;\n  box-sizing: border-box;\n  height: 40px;\n  padding: 10px 10px;\n  border-radius: 20px;\n  border: 0px solid transparent;\n  cursor: pointer;\n  text-decoration: none;\n  line-height: 0;\n\n  font-weight: normal;\n  font-size: 0.8rem;\n  color: var(--text);\n  background-color: var(--background-input);\n  opacity: 0.9;\n\n  display: inline-flex;\n  justify-content: space-between;\n  align-items: center;\n  transition: width 0.03s linear;\n\n  ${({ active }: ButtonProps) =>\n    active\n      ? css`\n          background-color: var(--background-input-active);\n          opacity: 1;\n        `\n      : null}\n\n  & > svg {\n    width: 20px;\n    height: 20px;\n  }\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst Button = styled.button`\n  ${styles}\n`;\nconst ButtonLink = styled.a`\n  ${styles}\n`;\n\nexport type ButtonAsItemPropsLink = {\n  kind: \"link\";\n  active?: boolean;\n  text: string;\n  href: string;\n};\nexport type ButtonAsItemPropsButton = {\n  kind: \"button\";\n  active?: boolean;\n  text: string;\n  onClick: (e: React.FormEvent | React.MouseEvent) => void;\n};\n\nexport type ButtonAsItemProps = ButtonAsItemPropsLink | ButtonAsItemPropsButton;\n\nconst ButtonAsItem = (buttonAsItemProps: ButtonAsItemProps): JSX.Element => {\n  const { active, text } = buttonAsItemProps;\n  switch (buttonAsItemProps.kind) {\n    case \"button\":\n      const { onClick } = buttonAsItemProps;\n      return (\n        <Button active={active} onClick={onClick}>\n          {text}\n        </Button>\n      );\n    case \"link\":\n      const { href } = buttonAsItemProps;\n      return (\n        <ButtonLink active={active} href={href} target=\"_blank\">\n          {text}\n        </ButtonLink>\n      );\n    default:\n      return <></>;\n  }\n};\n\nexport { Button, ButtonLink, ButtonAsItem };\n","function _isLocalhost(): boolean {\n  // I am assuming that development is done in standard browser\n  if (!window) return false; // most likely in app\n  if (!window.location) return false; // most likely in weird browser\n  if (window.location.host.startsWith(\"localhost\")) return true;\n  return false;\n}\n\nexport const isLocalhost = _isLocalhost();\n\nexport const twitchApiEndpoint = \"https://api.twitch.tv\";\n\nexport function wrapTwitchApiEndoint(url: string): string {\n  if (!isLocalhost) return twitchApiEndpoint + url;\n  return url;\n}\n\nexport const UNRANKED = [97223, 20506, 102179, 102180]; // wtf Umbra xD\n","import React from \"react\";\nimport { Stream, Subscriber, Subscription } from \"most\";\n\nfunction useStreamSubscribe<T>(\n  data$: Stream<T>,\n  _next: Subscriber<T>[\"next\"],\n  _complete: Subscriber<T>[\"complete\"] = () => undefined,\n  _error: Subscriber<T>[\"error\"] = () => undefined\n) {\n  const [subscription, setSubscription] = React.useState<Subscription<T>>();\n  const next = React.useCallback(_next, [_next]);\n  const complete = React.useCallback(_complete, [_complete]);\n  const error = React.useCallback(_error, [_error]);\n\n  React.useEffect(() => {\n    if (subscription) {\n      subscription.unsubscribe();\n    }\n    const _subscription = data$.subscribe({\n      complete,\n      error,\n      next\n    });\n    setSubscription(_subscription);\n  }, []);\n}\n\nexport { useStreamSubscribe };\n","import { Stream } from \"most\";\nimport mostConfig from \"recompose/mostObservableConfig\";\nimport { createEventHandlerWithConfig } from \"recompose\";\n\nfunction createConfiguredEventHandler<T>(): {\n  handler: (value: T) => void;\n  stream: Stream<T>;\n} {\n  return createEventHandlerWithConfig(mostConfig)<T, Stream<T>>();\n}\n\nexport { createConfiguredEventHandler };\n","import React from \"react\";\n\nconst InfoIcon = (): JSX.Element => (\n  <svg\n    version=\"1.1\"\n    id=\"info-icon-Capa_1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    x=\"0px\"\n    y=\"0px\"\n    width=\"30px\"\n    height=\"30px\"\n    viewBox=\"0 0 416.979 416.979\"\n  >\n    <g>\n      <path\n        fill=\"var(--header-icon-color)\"\n        d=\"M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85\n      c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786\n      c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576\n      c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765\n      c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z\"\n      />\n    </g>\n  </svg>\n);\n\nexport default InfoIcon;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst CloseButtonContainer = styled.div`\n  background-color: var(--background-close);\n  line-height: 0;\n  border-radius: 50%;\n  cursor: pointer;\n  margin-left: 10px;\n  position: absolute;\n  top: 5px;\n  right: 10px;\n`;\n\ntype CloseButtonProps = {\n  onClick: () => void | null;\n};\n\nconst CloseButton = ({ onClick }: CloseButtonProps): JSX.Element => (\n  <CloseButtonContainer onClick={onClick}>\n    <svg width=\"40\" height=\"35\" viewBox=\"0 0 40 35\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M36.25 0H3.75C1.67969 0 0 1.67969 0 3.75V31.25C0 33.3203 1.67969 35 3.75 35H36.25C38.3203 35 40 33.3203 40 31.25V3.75C40 1.67969 38.3203 0 36.25 0ZM29.7188 22.6953C30.0938 23.0703 30.0938 23.6797 29.7188 24.0547L26.5547 27.2188C26.1797 27.5938 25.5703 27.5938 25.1953 27.2188L20 21.9766L14.8047 27.2188C14.4297 27.5938 13.8203 27.5938 13.4453 27.2188L10.2812 24.0547C9.90625 23.6797 9.90625 23.0703 10.2812 22.6953L15.5234 17.5L10.2812 12.3047C9.90625 11.9297 9.90625 11.3203 10.2812 10.9453L13.4453 7.78125C13.8203 7.40625 14.4297 7.40625 14.8047 7.78125L20 13.0234L25.1953 7.78125C25.5703 7.40625 26.1797 7.40625 26.5547 7.78125L29.7188 10.9453C30.0938 11.3203 30.0938 11.9297 29.7188 12.3047L24.4766 17.5L29.7188 22.6953Z\"\n        fill=\"#714B7D\"\n      />\n    </svg>\n  </CloseButtonContainer>\n);\n\nexport { CloseButton };\n","import React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport InfoIcon from \"../../common/icons/InfoIcon\";\nimport { CloseButton } from \"../Buttons/CloseButton\";\nimport { LayoutRowPrimary } from \"../LayoutRow/LayoutRow\";\n\nimport beatfollowerLogo from \"./static/beatfollower.png\";\nimport beatsaverLogo from \"./static/beatsaver.png\";\n\nconst ChildrenContainer = styled.div`\n  display: flex;\n  box-sizing: border-box;\n  overflow: hidden;\n  margin: 8px 20px 0px 20px;\n  align-items: center;\n`;\n\nconst HeaderLinkWrapper = styled.span`\n  border: 0px solid transparent;\n  background-color: ${({ highcontrast, active }: { highcontrast?: boolean; active?: boolean }) =>\n    highcontrast ? (active ? \"var(--background-icon-pressed)\" : \"var(--background-icon-notpressed)\") : \"#fff\"};\n  box-sizing: border-box;\n  width: 45px;\n  min-width: 45px;\n  height: 35px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 20px;\n  overflow: hidden;\n`;\n\nconst NavigationImage = styled.img`\n  width: ${({ small }: { small?: boolean }) => (small ? \"20px\" : \"30px\")};\n  height: auto;\n`;\n\nconst NavigationText = styled.div`\n  display: inline-flex;\n  box-sizing: border-box;\n  overflow: hidden;\n  width: ${({ active }: { active: boolean }) => (active ? \"120px\" : \"0px\")};\n\n  margin-right: 10px;\n  margin-left: 10px;\n  color: white;\n  font-size: 1.2rem;\n  transition: width 0.1s linear;\n\n  align-items: center;\n  height: 100%;\n\n  @media (max-width: 350px) {\n    width: 0;\n    margin-right: 0;\n    margin-left: 0;\n  }\n`;\n\nconst NavigationLink = styled(Link)`\n  display: inline-flex;\n  justify-items: center;\n  align-items: center;\n\n  white-space: nowrap;\n  flex-shrink: 1;\n  width: ${({ active }: { active: boolean }) => (active ? \"initial\" : \"60px\")};\n\n  @media (max-width: 350px) {\n    width: 60px;\n  }\n\n  &,\n  &:active,\n  &:visited {\n    color: white;\n    text-decoration: none;\n  }\n`;\n\ntype HeaderLinkProps = {\n  to: string;\n  text: string;\n  children: JSX.Element | JSX.Element[];\n};\nconst HeaderLink = ({ children, to, text }: HeaderLinkProps) => {\n  const location = useLocation();\n  return (\n    <NavigationLink to={to} active={location.pathname === to}>\n      <HeaderLinkWrapper active={location.pathname === to} highcontrast>\n        {children}\n      </HeaderLinkWrapper>\n      <NavigationText active={location.pathname === to}>{text}</NavigationText>\n    </NavigationLink>\n  );\n};\n\ntype HeaderProps = {\n  togglePanel: ((state: boolean) => void) | null;\n  children?: JSX.Element | JSX.Element[];\n};\nconst Header = ({ togglePanel, children }: HeaderProps): JSX.Element => {\n  const handleClose = React.useCallback(() => {\n    togglePanel && togglePanel(false);\n  }, [togglePanel]);\n\n  return (\n    <LayoutRowPrimary>\n      <ChildrenContainer>\n        <HeaderLink to=\"/\" text=\"BeatSaver\">\n          <NavigationImage small src={beatsaverLogo} />\n        </HeaderLink>\n        <HeaderLink to=\"/beatfollower\" text=\"BeatFollower\">\n          <NavigationImage src={beatfollowerLogo} />\n        </HeaderLink>\n        <HeaderLink to=\"/info\" text=\"Settings\">\n          <InfoIcon />\n        </HeaderLink>\n        {children}\n        {togglePanel && <CloseButton onClick={handleClose} />}\n      </ChildrenContainer>\n    </LayoutRowPrimary>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\n\nconst MagnifyingGlassIcon = (): JSX.Element => (\n  <svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M29.5898 25.9395L23.748 20.0977C23.4844 19.834 23.127 19.6875 22.752 19.6875H21.7969C23.4141 17.6191 24.375 15.0176 24.375 12.1875C24.375 5.45508 18.9199 0 12.1875 0C5.45508 0 0 5.45508 0 12.1875C0 18.9199 5.45508 24.375 12.1875 24.375C15.0176 24.375 17.6191 23.4141 19.6875 21.7969V22.752C19.6875 23.127 19.834 23.4844 20.0977 23.748L25.9395 29.5898C26.4902 30.1406 27.3809 30.1406 27.9258 29.5898L29.584 27.9316C30.1348 27.3809 30.1348 26.4902 29.5898 25.9395ZM12.1875 19.6875C8.04492 19.6875 4.6875 16.3359 4.6875 12.1875C4.6875 8.04492 8.03906 4.6875 12.1875 4.6875C16.3301 4.6875 19.6875 8.03906 19.6875 12.1875C19.6875 16.3301 16.3359 19.6875 12.1875 19.6875Z\"\n        fill=\"#A78CB0\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"30\" height=\"30\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nexport default MagnifyingGlassIcon;\n","import styled, { css } from \"styled-components\";\n\nconst shadowizeFont = css`\n  color: transparent;\n  text-shadow: 0 0 0 #935ba5;\n`;\n\nconst ShadowizeFont = styled.span`\n  ${shadowizeFont}\n`;\n\nexport { shadowizeFont, ShadowizeFont };\n","import React from \"react\";\nimport { LayoutRowBase } from \"../../components/LayoutRow/LayoutRow\";\nimport MagnifyingGlassIcon from \"../../common/icons/MagnifyingGlassIcon\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { shadowizeFont } from \"../../common/styles/shadowizeFont\";\n\nconst PageHeaderLayoutRow = styled(LayoutRowBase)`\n  display: flex;\n  padding: 10px 8px 0px 8px;\n`;\n\nconst SearchButton = styled.button`\n  outline: none;\n  box-sizing: border-box;\n  height: 40px;\n  padding: 4px 20px;\n  margin-left: 12px;\n  border-radius: 20px;\n  border: 0px solid transparent;\n  cursor: pointer;\n\n  font-weight: normal;\n  font-size: 1.1rem;\n  color: var(--text-secondary);\n  background-color: var(--background-input);\n  transition: opacity 0.3s;\n\n  opacity: ${({ disabled }: { disabled: boolean }) => (disabled ? \"0.5\" : \"0.9\")};\n\n  &:hover {\n    opacity: ${({ disabled }: { disabled: boolean }) => (disabled ? \"0.6\" : \"1\")};\n  }\n`;\n\nconst ClearButton = styled.span`\n  ${shadowizeFont}\n\n  line-height: 0;\n  background: var(--background);\n  margin-left: -38px;\n  margin-top: 2px;\n  border: 1px solid var(--background-primary);\n  border-radius: 50%;\n  padding: 4px;\n  opacity: 0.9;\n  cursor: pointer;\n  width: 36px;\n  height: 36px;\n  position: absolute;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  box-sizing: border-box;\n\n  &:hover {\n    opacity: 1;\n  }\n`;\n\nconst SearchInputField = styled.input`\n  padding-right: 40px;\n  outline: none;\n  width: 100%;\n\n  height: 40px;\n  border: 0px solid transparent;\n  border-radius: 30px;\n  background: var(--background-input);\n\n  padding: 9px 0px 8px 53px;\n  color: var(--text);\n  font-size: 1.1em;\n  box-sizing: border-box;\n\n  & + svg {\n    position: absolute;\n    left: 24px;\n    top: 15px;\n  }\n`;\n\nconst SearchInputGroup = styled.div`\n  flex: 260 0;\n`;\n\ntype SearchInputProps = {\n  query: string;\n  setQuery: (value: string) => void;\n  submitSearch: () => void;\n};\nexport default function SearchInput({ query, setQuery, submitSearch }: SearchInputProps): JSX.Element {\n  const [t] = useTranslation();\n\n  const searchInputOnChange = React.useCallback((event) => setQuery(event.target.value), [setQuery]);\n  const searchInputOnKeyUp = React.useCallback(\n    (e) => {\n      if (e.key === \"Enter\") {\n        submitSearch();\n      }\n    },\n    [submitSearch]\n  );\n  const searchClearOnClick = React.useCallback(() => setQuery(\"\"), [setQuery]);\n  const searchSubmitOnClick = React.useCallback(() => submitSearch(), [submitSearch]);\n\n  return (\n    <PageHeaderLayoutRow>\n      <SearchInputGroup>\n        <SearchInputField\n          autoFocus\n          value={query}\n          placeholder={t(\"Enter song name\")}\n          onChange={searchInputOnChange}\n          onKeyUp={searchInputOnKeyUp}\n        />\n        <MagnifyingGlassIcon />\n        {query.length ? <ClearButton onClick={searchClearOnClick}>❌</ClearButton> : null}\n      </SearchInputGroup>\n      <SearchButton disabled={!query.trim().length} onClick={searchSubmitOnClick}>\n        <MagnifyingGlassIcon />\n      </SearchButton>\n    </PageHeaderLayoutRow>\n  );\n}\n","const placeholderDispatch: <T>(_: T) => undefined = () => undefined;\n\nexport { placeholderDispatch };\n","import React from \"react\";\nimport { placeholderDispatch } from \"../../common/utils/placeholderDispatch\";\n\ntype DefaultContextStateType = {\n  copied: boolean;\n  setCopied: React.Dispatch<React.SetStateAction<boolean>>;\n  askForBeatsaverNavigation: boolean;\n  setAskForBeatsaverNavigation: React.Dispatch<React.SetStateAction<boolean>>;\n};\n\nconst defaultContextState: DefaultContextStateType = {\n  copied: false,\n  setCopied: placeholderDispatch,\n  askForBeatsaverNavigation: false,\n  setAskForBeatsaverNavigation: placeholderDispatch\n};\n\nlet lastResetingActionSetState: React.Dispatch<React.SetStateAction<boolean>> = placeholderDispatch;\n\nfunction useResettingState(initialState: boolean) {\n  const [state, _setState] = React.useState(initialState);\n  const setState = React.useCallback(\n    (value: boolean) => {\n      if (value === true) {\n        lastResetingActionSetState && lastResetingActionSetState(false);\n        lastResetingActionSetState = _setState;\n      }\n      _setState(value);\n    },\n    [_setState]\n  );\n  return [state, setState] as const;\n}\n\nfunction useSongListItemContextState(): typeof defaultContextState {\n  const [copied, setCopied] = useResettingState(false);\n  const [askForBeatsaverNavigation, setAskForBeatsaverNavigation] = useResettingState(false);\n\n  const returns = {\n    copied,\n    setCopied,\n    askForBeatsaverNavigation,\n    setAskForBeatsaverNavigation\n  };\n\n  return returns as typeof defaultContextState;\n}\n\nconst SongListItemContext = React.createContext<ReturnType<typeof useSongListItemContextState>>(defaultContextState);\n\nexport { useSongListItemContextState, SongListItemContext };\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport { useTranslation } from \"react-i18next\";\nimport { CopyIcon } from \"../../common/icons/CopyIcon\";\nimport { SongListItemContext } from \"./SongListItemContext\";\nimport { Button } from \"../Buttons/Button\";\nimport AppEnvContext from \"../../AppEnvContext\";\nimport { ForwardIcon } from \"../../common/icons/ForwardIcon\";\n\nconst RequestButton = styled(Button)`\n  margin-left: 12px;\n`;\n\nconst CopyButton = styled(Button)`\n  margin-left: 12px;\n`;\n\nconst ForwardIconStyled = styled(ForwardIcon)`\n  transform: scale(1);\n  display: inline;\n`;\n\nconst RequestButtonText = styled.span`\n  margin-right: 5px;\n`;\n\nconst CopyButtonText = styled.span`\n  margin-right: 5px;\n`;\n\nconst SongListItemActionGroupWrapper = styled.div`\n  grid-area: action-group;\n\n  margin-left: auto;\n  margin-right: 10px;\n  flex: 100 0;\n  align-self: center;\n  text-align: center;\n  min-width: 90px;\n`;\n\ntype SongListItemActionsProps = {\n  bsrKey: string;\n  isRanked: boolean;\n};\nconst SongListItemActions = ({ bsrKey, isRanked }: SongListItemActionsProps): JSX.Element => {\n  const [t] = useTranslation();\n  const { srmBridgeChannel, userId } = React.useContext(AppEnvContext);\n  const { copied, setCopied } = React.useContext(SongListItemContext);\n  const useBridge = true;\n  if (useBridge) {\n    const endpoint = \"https://srm-bridge.test:9092/request\";\n    return (\n      <SongListItemActionGroupWrapper>\n        <RequestButton\n          style={{ backgroundColor: isRanked ? \"var(--background-secondary-buttonover)\" : \"invalid-color\" }}\n          onClick={() =>\n            fetch(endpoint, {\n              method: \"POST\",\n              headers: {\n                \"Accept\": \"application/json\",\n                \"Content-Type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                srmBridgeChannel,\n                bsrKey,\n                userId\n              })\n            })\n          }\n        >\n          <RequestButtonText>Request</RequestButtonText>\n          <ForwardIconStyled />\n        </RequestButton>\n      </SongListItemActionGroupWrapper>\n    );\n  }\n\n  return (\n    <SongListItemActionGroupWrapper>\n      <CopyToClipboard text={`!bsr ${bsrKey}`} onCopy={() => setCopied(true)}>\n        <CopyButton style={{ backgroundColor: isRanked ? \"var(--background-secondary-buttonover)\" : \"invalid-color\" }}>\n          <CopyButtonText>{copied ? t(\"Copied\") : t(\"Copy\")}</CopyButtonText>\n          <CopyIcon />\n        </CopyButton>\n      </CopyToClipboard>\n    </SongListItemActionGroupWrapper>\n  );\n};\n\nexport { SongListItemActions };\n","import React from \"react\";\n\nconst ForwardIcon = (props: { className?: string }): JSX.Element => (\n  <svg className={props.className} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\">\n    <path d=\"M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z\" />\n  </svg>\n);\n\nexport { ForwardIcon };\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\ntype SongListItemAvailableDifficultiesDifficultyBadgeVariant = \"E\" | \"N\" | \"H\" | \"X\" | \"X+\";\nconst SongListItemAvailableDifficultiesDifficultyBadge = styled.div`\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: bolder;\n  margin-top: 3px;\n  margin-left: 3px;\n  border-radius: 4px;\n\n  width: 20px;\n  height: 20px;\n  ${({ variant }: { variant: SongListItemAvailableDifficultiesDifficultyBadgeVariant }) => {\n    switch (variant) {\n      case \"E\":\n        return css`\n          content: \"E\";\n          background-color: paleturquoise;\n        `;\n      case \"N\":\n        return css`\n          content: \"N\";\n          background-color: lightgreen;\n        `;\n      case \"H\":\n        return css`\n          content: \"H\";\n          background-color: lightyellow;\n        `;\n      case \"X\":\n        return css`\n          content: \"X\";\n          background-color: red;\n          color: white;\n        `;\n      case \"X+\":\n        return css`\n          content: \"X+\";\n          background-color: darkred;\n          color: white;\n        `;\n    }\n  }}\n`;\nconst SongListItemAvailableDifficultiesWrapper = styled.div`\n  height: 100%;\n  margin: 5px;\n`;\ntype SongListItemAvailableDifficultiesProps = {\n  easy: boolean;\n  normal: boolean;\n  hard: boolean;\n  expert: boolean;\n  expertPlus: boolean;\n};\nconst SongListItemAvailableDifficulties = ({\n  easy,\n  normal,\n  hard,\n  expert,\n  expertPlus\n}: SongListItemAvailableDifficultiesProps): JSX.Element => {\n  return (\n    <SongListItemAvailableDifficultiesWrapper>\n      {easy && (\n        <SongListItemAvailableDifficultiesDifficultyBadge variant=\"E\">\n          E\n        </SongListItemAvailableDifficultiesDifficultyBadge>\n      )}\n      {normal && (\n        <SongListItemAvailableDifficultiesDifficultyBadge variant=\"N\">\n          N\n        </SongListItemAvailableDifficultiesDifficultyBadge>\n      )}\n      {hard && (\n        <SongListItemAvailableDifficultiesDifficultyBadge variant=\"H\">\n          H\n        </SongListItemAvailableDifficultiesDifficultyBadge>\n      )}\n      {expert && (\n        <SongListItemAvailableDifficultiesDifficultyBadge variant=\"X\">\n          X\n        </SongListItemAvailableDifficultiesDifficultyBadge>\n      )}\n      {expertPlus && (\n        <SongListItemAvailableDifficultiesDifficultyBadge variant=\"X+\">\n          X+\n        </SongListItemAvailableDifficultiesDifficultyBadge>\n      )}\n    </SongListItemAvailableDifficultiesWrapper>\n  );\n};\n\nexport { SongListItemAvailableDifficulties };\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport loadingGif from \"./static/loading.gif\";\nimport baseImg from \"./static/base.png\";\nimport notfoundImg from \"./static/notfound.png\";\nimport { SongListItemContext } from \"./SongListItemContext\";\n\nconst SongListItemCoverImageWrapper = styled.div`\n  grid-area: cover-image;\n  width: 91px;\n  height: 91px;\n  min-width: 91px;\n  max-width: 91px;\n\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-right: 1px solid var(--border);\n\n  & > img {\n    width: 91px;\n    height: 91px;\n    min-width: 91px;\n    max-width: 91px;\n    max-height: 91px;\n  }\n`;\n\nconst SongListItemCoverImageBackgroundWrapper = styled.div`\n  opacity: 0.05;\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  & > img {\n    width: 100%;\n  }\n`;\n\nconst SongListItemCoverImageImg = styled.img`\n  background-position: center;\n  background-size: contain;\n  background-image: url(${baseImg});\n`;\n\nconst SongListItemCoverImageImgBg = styled.img`\n  opacity: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  transform: scale(1.3);\n  margin-top: -50px;\n  transition: opacity 0.3s linear, transform 0.5s linear, margin-top 0.5s linear;\n`;\n\nconst SongListItemCoverImageLoading = styled.img`\n  position: absolute;\n  transition: opacity 0.3s linear;\n  opacity: 1;\n`;\n\nconst SongListItemCoverImage = ({ coverURL }: { coverURL: string }): JSX.Element => {\n  const { askForBeatsaverNavigation, setAskForBeatsaverNavigation } = React.useContext(SongListItemContext);\n  const loaderRef = React.useRef<null | HTMLImageElement>(null);\n  const onError = React.useCallback<React.ReactEventHandler<HTMLImageElement>>(\n    (event) => {\n      event.currentTarget.src = notfoundImg;\n      if (loaderRef.current) {\n        loaderRef.current.style.opacity = \"0\";\n      }\n    },\n    [loaderRef]\n  );\n  const onLoad = React.useCallback(() => {\n    if (loaderRef.current) {\n      loaderRef.current.style.opacity = \"0\";\n    }\n  }, [loaderRef]);\n  const toggleAskForBeatsaverNavigation = React.useCallback(() => {\n    setAskForBeatsaverNavigation(!askForBeatsaverNavigation);\n  }, [askForBeatsaverNavigation, setAskForBeatsaverNavigation]);\n\n  return (\n    <SongListItemCoverImageWrapper onClick={toggleAskForBeatsaverNavigation}>\n      <SongListItemCoverImageImg src={coverURL} onLoad={onLoad} onError={onError} />\n      <SongListItemCoverImageLoading ref={loaderRef} src={loadingGif} />\n    </SongListItemCoverImageWrapper>\n  );\n};\n\nconst SongListItemCoverImageBackground = ({ coverURL }: { coverURL: string }): JSX.Element => {\n  const onLoad = React.useCallback((event) => {\n    event.currentTarget.style.opacity = \"1\";\n    event.currentTarget.style.transform = \"scale(1.0)\";\n    event.currentTarget.style.marginTop = \"10px\";\n  }, []);\n\n  return (\n    <SongListItemCoverImageBackgroundWrapper>\n      <SongListItemCoverImageImgBg src={coverURL} onLoad={onLoad} />\n    </SongListItemCoverImageBackgroundWrapper>\n  );\n};\nexport { SongListItemCoverImage, SongListItemCoverImageBackground };\n","import React from \"react\";\nimport styled, { css } from \"styled-components\";\n\ntype SongListItemDetailsSpanVariant = \"title\" | \"subtitle\" | \"item\";\ntype SongListItemDetailsSpanProps = {\n  variant: SongListItemDetailsSpanVariant;\n};\nconst SongListItemDetailsSpan = styled.span`\n  ${({ variant }: SongListItemDetailsSpanProps) => {\n    switch (variant) {\n      case \"title\":\n        return css`\n          word-break: break-all;\n          font-size: 1.2rem;\n          color: var(--text);\n        `;\n      case \"subtitle\":\n        return css`\n          word-break: break-all;\n          font-size: 0.7rem;\n          color: var(--text-secondary);\n          margin-left: 5px;\n        `;\n      case \"item\":\n        return css`\n          font-size: 1rem;\n          color: var(--text);\n          margin-left: 5px;\n        `;\n    }\n  }}\n`;\n\ntype SongListItemDetailsCommonProps = {\n  data: string | null | undefined | number;\n  suffix: string;\n  variant: SongListItemDetailsSpanVariant;\n  onClick?: () => void;\n};\nconst SongListItemDetailsCommon = (WrapperComponent: React.FunctionComponent) => {\n  const memoRender = ({ variant, data, suffix, onClick }: SongListItemDetailsCommonProps) => (\n    <WrapperComponent>\n      <SongListItemDetailsSpan variant={variant} onClick={onClick}>\n        {data}&nbsp;{suffix}\n      </SongListItemDetailsSpan>\n    </WrapperComponent>\n  );\n\n  const _SongListItemDetailsCommon = (props: SongListItemDetailsCommonProps) => {\n    const { data } = props;\n\n    if (typeof data === \"string\" && data.length > 0) {\n      return memoRender(props);\n    }\n\n    if (typeof data === \"number\") {\n      return memoRender(props);\n    }\n\n    return null;\n  };\n  return _SongListItemDetailsCommon;\n};\n\nconst SongListItemDetailsFullwidthItemWrapper = styled.div`\n  margin-left: 5px;\n  grid-column: span var(--fullwidth-span);\n  grid-row: span 1;\n`;\nconst _SongListItemDetailsFullwidthItem = SongListItemDetailsCommon(SongListItemDetailsFullwidthItemWrapper);\nconst SongListItemDetailsFullwidthItem = (\n  props: SongListItemDetailsCommonProps\n): ReturnType<typeof _SongListItemDetailsFullwidthItem> => {\n  return _SongListItemDetailsFullwidthItem(props);\n};\nconst SongListItemDetailsSmallItemWrapper = styled.div`\n  margin-left: 10px;\n  grid-column: span var(--small-span);\n  grid-row: span 1;\n`;\nconst _SongListItemDetailsSmallItem = SongListItemDetailsCommon(SongListItemDetailsSmallItemWrapper);\nconst SongListItemDetailsSmallItem = (\n  props: SongListItemDetailsCommonProps\n): ReturnType<typeof _SongListItemDetailsSmallItem> => {\n  return _SongListItemDetailsSmallItem(props);\n};\n\nexport { SongListItemDetailsFullwidthItem, SongListItemDetailsSmallItem };\n","import styled from \"styled-components\";\n\nconst repeat = (number: number, stringToRepeat: string) =>\n  new Array(number + 1).map(() => \" \").join(stringToRepeat + \" \");\nconst dots = (number: number) => new Array(number + 1).map(() => \" \").join(\". \");\n\nconst SongListItemDetailsWrapper = styled.div`\n  display: grid;\n  width: 100%;\n  --fullwidth-span: 1;\n  --small-span: 1;\n  grid-template-areas:\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${dots(1)}\"\n    \"${repeat(1, \"action-group\")}\" /* details... */;\n\n  @media (min-width: 250px) {\n    --fullwidth-span: 4;\n    --small-span: 2;\n\n    grid-template-areas:\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${dots(4)}\"\n      \"${repeat(4, \"action-group\")}\" /* details... */;\n  }\n\n  @media (min-width: 380px) {\n    --fullwidth-span: 6;\n    --small-span: 2;\n\n    grid-template-areas:\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${dots(6)}\"\n      \"${repeat(6, \"action-group\")}\" /* details... */;\n  }\n\n  @media (min-width: 499px) {\n    --fullwidth-span: 13;\n    --small-span: 4;\n    grid-template-areas:\n      \"${dots(13)}\" /* title */\n      \"${dots(13)}\" /* artist */\n      \"${dots(13)}\" /* mapper */\n      \"${dots(13)}\" /* mapper */\n      \"${dots(13)}\" /* mapper */\n      \"${repeat(13, \"action-group\")}\";\n  }\n`;\n\nexport { SongListItemDetailsWrapper };\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { LayoutRowTall } from \"../LayoutRow/LayoutRow\";\nimport { SongListItemContext, useSongListItemContextState } from \"./SongListItemContext\";\nimport { SongListItemActions } from \"./SongListItemActions\";\nimport { SongListItemAvailableDifficulties } from \"./SongListItemAvailableDifficulties\";\nimport { SongListItemCoverImage, SongListItemCoverImageBackground } from \"./SongListItemCoverImage\";\nimport {\n  SongListItemDetailsFullwidthItem,\n  SongListItemDetailsSmallItem\n} from \"./SongListItemDetails/SongListItemDetailsCommon\";\nimport { SongListItemDetailsWrapper } from \"./SongListItemDetails/SongListItemDetailsWrapper\";\nimport { useTranslation } from \"react-i18next\";\nimport { Button } from \"../Buttons/Button\";\nimport exclamation_mark from \"./static/exclamation_mark.png\";\nimport question_mark from \"./static/question_mark.png\";\nimport { GroupButton } from \"../Buttons/GroupButton\";\n\nconst SongListItemWrapper = styled(LayoutRowTall)`\n  width: 100%;\n  min-height: initial;\n  padding: initial;\n`;\ntype SongListItemContainerProps = {\n  moveToLeft: boolean;\n  isRanked: boolean;\n};\nconst SongListItemContainer = styled(LayoutRowTall)`\n  background-color: ${({ isRanked }: SongListItemContainerProps) =>\n    isRanked ? \"var(--background-secondary)\" : \"invalid-color\"};\n  border-bottom: 1px solid var(--border);\n  transition: margin-left 0.3s linear;\n  margin-left: ${({ moveToLeft }: SongListItemContainerProps) => (moveToLeft ? \"-150px\" : \"\")};\n`;\n\ntype SongListItemInfoWrapperProps = {\n  variant: \"info\" | \"warn\";\n};\nconst SongListItemInfoWrapper = styled.div`\n  position: absolute;\n  right: 15px;\n  width: 120px;\n  height: 100%;\n  box-sizing: border-box;\n  padding: 0 5px;\n  border-radius: 20px;\n  overflow: hidden;\n\n  background-color: ${({ variant }: SongListItemInfoWrapperProps) => {\n    return (variant === \"warn\" && \"var(--background-warn)\") || (variant === \"info\" && \"var(--background-info)\");\n  }};\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n  text-align: center;\n  font-size: 0.9rem;\n  padding-top: 1px;\n`;\nconst SongListItemInfoBgImage = styled.img`\n  position: absolute;\n  pointer-events: none;\n  height: 100%;\n  object-position: center;\n  opacity: 0.05;\n  transform: rotate(30deg);\n`;\n\nconst SongListItemDetailsContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  font-size: 10px;\n  padding-top: 1px;\n`;\n\nconst SongListItemCoverWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\ntype SongListItemProps = {\n  hash: string;\n  coverURL: string;\n  songName: string;\n  songAuthorName: string;\n  levelAuthorName: string;\n  bsrKey: string;\n  downloads: number | null;\n  upVotes: number | null;\n  downVotes: number | null;\n  percentVotes: number | null;\n  isRanked: boolean;\n  isQualified?: boolean;\n};\ntype SongListItemDifficultyProps = {\n  easy: boolean;\n  normal: boolean;\n  hard: boolean;\n  expert: boolean;\n  expertPlus: boolean;\n};\nconst SongListItem = ({\n  hash,\n  coverURL,\n  songName,\n  songAuthorName,\n  levelAuthorName,\n  bsrKey,\n  downloads,\n  upVotes,\n  downVotes,\n  percentVotes,\n  isRanked,\n  isQualified,\n  easy,\n  normal,\n  hard,\n  expert,\n  expertPlus\n}: SongListItemProps & SongListItemDifficultyProps): JSX.Element => {\n  const [t] = useTranslation();\n  const componentContextState = useSongListItemContextState();\n  const { copied, setCopied, askForBeatsaverNavigation, setAskForBeatsaverNavigation } = componentContextState;\n  const shouldMoveToLeft = copied || askForBeatsaverNavigation;\n  const toggleAskForBeatsaverNavigation = React.useCallback(() => {\n    setAskForBeatsaverNavigation(!askForBeatsaverNavigation);\n  }, [askForBeatsaverNavigation, setAskForBeatsaverNavigation]);\n\n  return (\n    <SongListItemContext.Provider value={componentContextState}>\n      <SongListItemWrapper>\n        {copied && (\n          <SongListItemInfoWrapper variant=\"warn\">\n            <SongListItemInfoBgImage src={exclamation_mark} />\n            {t(\"Paste on chat\")}\n            <br />\n            {t(\"to make request\")}\n            <Button onClick={() => setCopied(false)}>{t(\"Done\")}</Button>\n          </SongListItemInfoWrapper>\n        )}\n        {askForBeatsaverNavigation && (\n          <SongListItemInfoWrapper variant=\"info\">\n            <SongListItemInfoBgImage src={question_mark} />\n            {t(\"Do you want to go to beatsaver page?\")}\n            <GroupButton\n              group={[\n                {\n                  kind: \"button\",\n                  onClick: () => setAskForBeatsaverNavigation(false),\n                  text: \"Close\"\n                },\n                {\n                  kind: \"link\",\n                  text: \"Go!\",\n                  href: `https://beatsaver.com/maps/${bsrKey}`\n                }\n              ]}\n            />\n          </SongListItemInfoWrapper>\n        )}\n        <SongListItemContainer key={hash} isRanked={isRanked} moveToLeft={shouldMoveToLeft}>\n          <SongListItemCoverImageBackground coverURL={coverURL} />\n          <SongListItemDetailsContainer>\n            <SongListItemCoverWrapper>\n              <SongListItemCoverImage coverURL={coverURL} />\n              <SongListItemAvailableDifficulties\n                easy={easy}\n                normal={normal}\n                hard={hard}\n                expert={expert}\n                expertPlus={expertPlus}\n              />\n            </SongListItemCoverWrapper>\n            <SongListItemDetailsWrapper>\n              <SongListItemDetailsFullwidthItem\n                variant=\"title\"\n                data={songName}\n                suffix=\"\"\n                onClick={toggleAskForBeatsaverNavigation}\n              />\n              <SongListItemDetailsFullwidthItem variant=\"subtitle\" data={songAuthorName} suffix=\"\" />\n              <SongListItemDetailsFullwidthItem variant=\"subtitle\" data={levelAuthorName} suffix=\"\" />\n              <SongListItemDetailsSmallItem variant=\"item\" data={bsrKey} suffix=\"🔑\" />\n              <SongListItemDetailsSmallItem variant=\"item\" data={downloads} suffix=\"💾\" />\n              <SongListItemDetailsSmallItem variant=\"item\" data={percentVotes} suffix=\"💯\" />\n              <SongListItemDetailsSmallItem variant=\"item\" data={upVotes} suffix=\"👍\" />\n              <SongListItemDetailsSmallItem variant=\"item\" data={downVotes} suffix=\"👎\" />\n              <SongListItemDetailsSmallItem\n                variant=\"item\"\n                data={(isRanked && \"Ranked\") || (isQualified && \"Qualified\") || null}\n                suffix=\"⭐\"\n              />\n              <SongListItemActions bsrKey={bsrKey} isRanked={isRanked} />\n            </SongListItemDetailsWrapper>\n          </SongListItemDetailsContainer>\n        </SongListItemContainer>\n      </SongListItemWrapper>\n    </SongListItemContext.Provider>\n  );\n};\n\nexport { SongListItem };\n","import styled from \"styled-components\";\nimport { hideScrollbars } from \"../../common/styles/hideScrollbars\";\n\nconst SongListContainer = styled.div`\n  box-sizing: border-box;\n  padding-bottom: 1rem;\n  overflow-y: scroll;\n\n  ${hideScrollbars}\n`;\n\nexport { SongListContainer };\n","import { SongListType } from \"./pages/SearchPage/SearchPage\";\n\nexport function fetchSongs(query = \"\", automapper = \"0\"): Promise<SongListType> {\n  const url = `https://api.beatsaver.com/search/text/0?q=${query}&automapper=${automapper}`;\n\n  return fetch(url)\n    .then(function (response) {\n      if (response.status !== 200) {\n        console.log(`Looks like there was a problem. Status Code: ${response.status}`);\n        throw `Looks like there was a problem. Status Code:  ${response.status}`;\n      }\n\n      // Examine the text in the response\n      return response.json();\n    })\n    .then(function (data) {\n      console.log(data);\n      return data;\n    })\n    .catch(function (err) {\n      console.log(\"Fetch Error :-S\", err);\n    });\n}\n\nexport function isNotNull<T>(something: T | null): something is T {\n  return something !== null;\n}\n\n// Trimmed LowerCase\nconst stringTLC = (s: string) => s.toLocaleLowerCase().trim();\n\nconst autoMappers = [\"Beat Sage\", \"Deep Saber\"];\nconst autoMappersTLC = autoMappers.map(stringTLC);\n\nexport const isCreatedByAutomapper = (songName: string, songAuthorName: string, levelAuthorName: string): boolean => {\n  const songNameTLC = stringTLC(songName);\n  const songAuthorNameTLC = stringTLC(songAuthorName);\n  const levelAuthorNameTLC = stringTLC(levelAuthorName);\n\n  return autoMappersTLC.some((autoMapperTLC) => {\n    return (\n      songNameTLC.includes(autoMapperTLC) ||\n      songAuthorNameTLC.includes(autoMapperTLC) ||\n      levelAuthorNameTLC.includes(autoMapperTLC)\n    );\n  });\n};\n","import React from \"react\";\nimport { SongListItem } from \"../../components/SongList/SongListItem\";\nimport { SongListDocsItem, SongListDocsItemVersion } from \"./SearchPage\";\nimport { SongListContainer } from \"../../components/SongList/SongListContainer\";\nimport { isCreatedByAutomapper } from \"../../utils\";\n\nconst getDiffs = (lastVersion: SongListDocsItemVersion) => {\n  if (!lastVersion) return;\n  const { diffs } = lastVersion;\n\n  if (!diffs) return;\n  const easy = diffs.some((diff) => diff.difficulty === \"Easy\");\n  const normal = diffs.some((diff) => diff.difficulty === \"Normal\");\n  const hard = diffs.some((diff) => diff.difficulty === \"Hard\");\n  const expert = diffs.some((diff) => diff.difficulty === \"Expert\");\n  const expertPlus = diffs.some((diff) => diff.difficulty === \"ExpertPlus\");\n\n  return {\n    easy,\n    normal,\n    hard,\n    expert,\n    expertPlus\n  };\n};\n\nconst Item = () => {\n  const _Item = (docData: SongListDocsItem) => {\n    const allvotes = docData.stats.upvotes + docData.stats.downvotes;\n    const percentVotes = ~~((docData.stats.upvotes / allvotes) * 1000) / 10;\n    const lastVersion = docData.versions[docData.versions.length - 1];\n    const coverURL = lastVersion.coverURL;\n\n    const shouldBeHidden = isCreatedByAutomapper(\n      docData.metadata.songName,\n      docData.metadata.songAuthorName,\n      docData.metadata.levelAuthorName\n    );\n\n    if (shouldBeHidden) return <></>;\n\n    const diffs = getDiffs(lastVersion);\n\n    const isRanked = docData.ranked;\n    const isQualified = docData.qualified;\n\n    return (\n      <SongListItem\n        hash={lastVersion.hash}\n        coverURL={coverURL}\n        songName={docData.metadata.songName}\n        songAuthorName={docData.metadata.songAuthorName}\n        levelAuthorName={docData.metadata.levelAuthorName}\n        bsrKey={docData.id}\n        downloads={docData.stats.downloads}\n        upVotes={docData.stats.upvotes}\n        downVotes={docData.stats.downvotes}\n        percentVotes={percentVotes}\n        isRanked={isRanked}\n        isQualified={isQualified}\n        easy={!!diffs?.easy}\n        normal={!!diffs?.normal}\n        hard={!!diffs?.hard}\n        expert={!!diffs?.expert}\n        expertPlus={!!diffs?.expertPlus}\n      />\n    );\n  };\n  return _Item;\n};\n\nconst _ItemList = ({\n  documentList,\n  children\n}: {\n  documentList: SongListDocsItem[];\n  children?: JSX.Element | JSX.Element[];\n}) => {\n  const renderedItems = documentList.map(Item());\n\n  return (\n    <SongListContainer>\n      {renderedItems}\n      {renderedItems.length > 0 && children}\n    </SongListContainer>\n  );\n};\n\nexport default function SearchList({\n  documentList,\n  children\n}: {\n  documentList: SongListDocsItem[];\n  children?: JSX.Element | JSX.Element[];\n}): JSX.Element {\n  return <_ItemList documentList={documentList}>{children}</_ItemList>;\n}\n","import React from \"react\";\n\ntype UsePaginatedDataOptions = {\n  initialPageNumber: number;\n};\nfunction usePaginatedData<ResponseType, ItemType>(\n  getUrl: (page: number) => string,\n  flatMapResponseArrToItemArr: (responses: ResponseType[]) => ItemType[],\n  options: UsePaginatedDataOptions\n) {\n  const [pageNumber, setPageNumber] = React.useState(-1);\n  const [newPage, setNewPage] = React.useState<ResponseType | null>(null);\n  const [pages, setPages] = React.useState<ResponseType[]>([]);\n  const [isFetching, setIsFetching] = React.useState(false);\n  const [isError, setIsError] = React.useState(false);\n  const [results, setResults] = React.useState<ItemType[]>([]);\n\n  const clearData = React.useCallback(() => {\n    setPages([]);\n    setResults([]);\n    setPageNumber(-1);\n    setIsFetching(false);\n    setIsError(false);\n  }, [setPages, setResults, setPageNumber, setIsFetching, setIsError]);\n\n  const fetchPage = React.useCallback(\n    (page: number) => {\n      setIsFetching(true);\n      setIsError(false);\n      fetch(getUrl(page))\n        .then((res) => res.json())\n        .then((data) => {\n          setPageNumber(page);\n          setNewPage(data);\n          setIsFetching(false);\n          setIsError(false);\n        })\n        .catch(() => {\n          setIsFetching(false);\n          setIsError(true);\n        });\n    },\n    [getUrl, setIsFetching, setIsError, setPages]\n  );\n\n  const initialFetch = React.useCallback(() => {\n    fetchPage(options.initialPageNumber);\n  }, [options.initialPageNumber, fetchPage]);\n\n  const fetchNextPage = React.useCallback(() => {\n    fetchPage(pageNumber + 1);\n  }, [pageNumber, fetchPage]);\n\n  React.useEffect(() => {\n    if (newPage !== null) {\n      setNewPage(null);\n      setPages([...pages, newPage]);\n    }\n  }, [newPage, setPages, pages]);\n\n  React.useEffect(() => {\n    setResults(flatMapResponseArrToItemArr(pages));\n  }, [pages, setResults, flatMapResponseArrToItemArr]);\n\n  return [results, isFetching, isError, initialFetch, fetchNextPage, clearData] as const;\n}\n\nexport { usePaginatedData };\n","// declare const Twitch: any;\n\nimport React from \"react\";\nimport styled from \"styled-components\";\n\nimport { LayoutRowPlaceholderTransparent } from \"../../components/LayoutRow/LayoutRow\";\nimport SearchInput from \"./SearchInput\";\nimport SearchList from \"./SearchList\";\nimport { useTranslation } from \"react-i18next\";\nimport { usePaginatedData } from \"../../common/hooks/usePaginatedData\";\n\nexport type SongListDocsItemMetadataCharacteristicsDifficultiesEntry = {\n  duration: number;\n  length: number;\n  njs: number;\n  njsOffset: number;\n  bombs: number;\n  notes: number;\n  obstacles: number;\n};\n\ntype SongListDocsItemUploader = {\n  id: number;\n  name: string;\n  hash: string;\n  avatar: string; // gravatar url\n};\n\ntype SongListDocsItemMetadata = {\n  bpm: number;\n  duration: number;\n  songName: string;\n  songSubName: string;\n  songAuthorName: string;\n  levelAuthorName: string;\n};\n\ntype SongListDocsItemStats = {\n  plays: number;\n  downloads: number;\n  upvotes: number;\n  downvotes: number;\n  score: number;\n};\n\ntype SongListDocsItemVersionDiff = {\n  njs: number;\n  offset: number;\n  notes: number;\n  bombs: number;\n  obstacles: number;\n  nps: number;\n  length: number;\n  characteristic: string;\n  difficulty: \"Easy\" | \"Normal\" | \"Hard\" | \"Expert\" | \"ExpertPlus\";\n  events: number;\n  chroma: boolean;\n  me: boolean;\n  ne: boolean;\n  cinema: boolean;\n  seconds: number;\n  paritySummary: {\n    errors: number;\n    warns: number;\n    resets: number;\n  };\n};\n\nexport type SongListDocsItemVersion = {\n  hash: string;\n  key: string;\n  state: string;\n  createdAt: string;\n  sageScore: number;\n  diffs: SongListDocsItemVersionDiff[];\n  downloadURL: string;\n  coverURL: string;\n  previewURL: string;\n};\n\nexport type SongListDocsItem = {\n  id: string;\n  name: string;\n  description: string;\n  uploader: SongListDocsItemUploader;\n  metadata: SongListDocsItemMetadata;\n  stats: SongListDocsItemStats;\n  uploaded: string;\n  automapper: boolean;\n  ranked: boolean;\n  qualified: boolean;\n  versions: SongListDocsItemVersion[];\n};\n\nexport type SongListType = {\n  docs: SongListDocsItem[];\n};\n\nconst SearchPageFetchMoreButtonWrapper = styled.div`\n  margin-top: 10px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst SearchPageFetchMoreButton = styled.button`\n  height: 42px;\n  padding: 5px 10px;\n  border-radius: 20px;\n  border: 0px solid transparent;\n  background-color: var(--background-input);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.2rem;\n  color: var(--text);\n`;\n\nconst SearchPageWrapper = styled.div`\n  display: grid;\n  grid-template-rows: 52px 1fr;\n  height: 100%;\n`;\n\nconst SearchPageFixedMessageWrapper = styled.div`\n  position: absolute;\n  max-height: 10vh;\n  top: 30%;\n`;\n\nfunction getMessage(\n  t: (translation: string) => string,\n  wasSearching: boolean,\n  isSearching: boolean,\n  songList: SongListDocsItem[]\n) {\n  if (isSearching) return t(\"Searching...\");\n  if (!wasSearching) return t(\"Start searching\");\n  if (!songList.length) return t(\"No results\");\n  return \"\";\n}\n\nconst mapResponsesToItems = (pages: SongListType[]): SongListDocsItem[] => {\n  return pages.flatMap((page) => {\n    return page.docs.flat();\n  });\n};\n\nexport default function SearchPage(): JSX.Element {\n  const [t] = useTranslation();\n  const [wasSearching, setWasSearching] = React.useState(false);\n  const [query, setQuery] = React.useState(\"\");\n  const getUrl = React.useCallback(\n    (page) => {\n      return `https://api.beatsaver.com/search/text/${page}?q=${query}`;\n    },\n    [query]\n  );\n\n  const [results, isFetching, isError, initialFetch, fetchNextPage, clearData] = usePaginatedData(\n    getUrl,\n    mapResponsesToItems,\n    {\n      initialPageNumber: 0\n    }\n  );\n\n  const submitSearch = React.useCallback(() => {\n    clearData();\n    setWasSearching(true);\n    initialFetch();\n  }, [clearData, setWasSearching, initialFetch]);\n\n  const message = getMessage(t, wasSearching, isFetching, results);\n  // const canRenderSearchList = !message && !isFetching;\n\n  return (\n    <SearchPageWrapper>\n      <SearchInput query={query} setQuery={setQuery} submitSearch={submitSearch} />\n      <SearchPageFixedMessageWrapper>\n        {message && <LayoutRowPlaceholderTransparent>{message}</LayoutRowPlaceholderTransparent>}\n        {isError && <LayoutRowPlaceholderTransparent>Error</LayoutRowPlaceholderTransparent>}\n      </SearchPageFixedMessageWrapper>\n      <SearchList key=\"list\" documentList={results}>\n        <SearchPageFetchMoreButtonWrapper>\n          <SearchPageFetchMoreButton onClick={() => fetchNextPage()}>\n            {isFetching ? \"Fetching...\" : \"Fetch more\"}\n          </SearchPageFetchMoreButton>\n        </SearchPageFetchMoreButtonWrapper>\n      </SearchList>\n    </SearchPageWrapper>\n  );\n}\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\n\nimport EN from \"./langs/en.json\";\nimport PL from \"./langs/pl.json\";\n\nconst resources = {\n  en: {\n    translation: EN\n  },\n  pl: {\n    translation: PL\n  }\n};\n\nconst languages = Object.keys(resources);\nexport { languages };\n\ni18n\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to react-i18next.\n  .use(initReactI18next)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    resources,\n    fallbackLng: \"en\",\n    debug: true,\n\n    interpolation: {\n      escapeValue: false // not needed for react as it escapes by default\n    }\n  });\n\nexport default i18n;\n","import { i18n } from \"i18next\";\nimport React, { useRef } from \"react\";\nimport { getI18n, useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport { useFormField } from \"../../common/hooks/useFormField\";\nimport { languages } from \"../../i18n/init-i18n\";\n\nconst LanguageSelectContainer = styled.div`\n  width: 100%;\n  margin-bottom: 12px;\n`;\n\nconst StyledSelect = styled.select`\n  font-size: 1.2rem;\n  padding: 5px;\n  background: var(--background-input);\n  border: 1px solid var(--background-primary);\n`;\n\nconst StyledOption = styled.option`\n  font-size: 1.2rem;\n`;\n\nconst StyledSelectLabel = styled.span`\n  font-size: 1.2rem;\n  color: var(--text-secondary);\n  margin-right: 10px;\n`;\n\nconst StyledOptionItem = (i18nInstance: i18n, selectedLanguage: string) => {\n  const _StyledOptionItem = (language: string) => (\n    <StyledOption disabled={language === selectedLanguage} value={language}>\n      {i18nInstance.getFixedT(language)(\"languageName\")}\n    </StyledOption>\n  );\n  return _StyledOptionItem;\n};\n\nconst LanguageSelector = (): JSX.Element => {\n  const [t] = useTranslation();\n  const i18nInstance = getI18n();\n  const selectRef = useRef<HTMLSelectElement | null>(null);\n  const { value: language, sinkEvent: selectOnChange } = useFormField<HTMLSelectElement, string>(\n    i18nInstance.language,\n    \"onchange\",\n    (newLanguage) => {\n      i18nInstance.changeLanguage(newLanguage);\n      selectRef.current?.blur();\n    }\n  );\n\n  return (\n    <LanguageSelectContainer>\n      <StyledSelectLabel>{t(\"Select language\")}</StyledSelectLabel>\n      <StyledSelect ref={selectRef} value={language} onChange={selectOnChange}>\n        {languages.map(StyledOptionItem(i18nInstance, language))}\n        {/* <StyledOption value=\"en\">EN</StyledOption>\n        <StyledOption value=\"pl\">PL</StyledOption> */}\n      </StyledSelect>\n    </LanguageSelectContainer>\n  );\n};\n\nexport default LanguageSelector;\n","import React from \"react\";\n\nexport const wrapWith = (Wrapper: ({}: React.PropsWithChildren<unknown>) => JSX.Element) =>\n  function WrapperWith<T extends React.ReactNode>(item: T, index: number): JSX.Element {\n    return <Wrapper key={index}>{item}</Wrapper>;\n  };\n\nexport const liWrapper = ({ children }: React.PropsWithChildren<unknown>): JSX.Element => <li>{children}</li>;\nexport const wrapWithLi = wrapWith(liWrapper);\n","import React from \"react\";\n\nconst GithubLogo = (): JSX.Element => (\n  <svg\n    version=\"1.1\"\n    id=\"github-logo-Capa_1\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n    x=\"0px\"\n    y=\"0px\"\n    width=\"438.549px\"\n    height=\"438.549px\"\n    viewBox=\"0 0 438.549 438.549\"\n    style={{ enableBackground: \"new 0 0 438.549 438.549;\" } as React.CSSProperties}\n    xmlSpace=\"preserve\"\n  >\n    <g>\n      <path\n        d=\"M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365\n\t\tc-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63\n\t\tc0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996\n\t\tc2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136\n\t\tc-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559\n\t\tc-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559\n\t\tc-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997\n  c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851\n\t\tc5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136\n\t\tc6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41\n\t\tc-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126\n\t\tc-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817\n\t\tc-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994\n\t\tc5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849\n\t\tc7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24\n\t\tc15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979\n\t\tc-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146\n\t\tc9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995\n\t\tc44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906\n\t\tC438.536,184.851,428.728,148.168,409.132,114.573z\"\n      />\n    </g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n    <g></g>\n  </svg>\n);\n\nexport { GithubLogo };\n","import React from \"react\";\n\nconst ReportIcon = (): JSX.Element => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    className=\"icon icon-tabler icon-tabler-message-report\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    strokeWidth=\"2\"\n    stroke=\"currentColor\"\n    fill=\"none\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    <path stroke=\"none\" d=\"M0 0h24v24H0z\" />\n    <path d=\"M4 21v-13a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v6a3 3 0 0 1 -3 3h-9l-4 4\" />\n    <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"11\" />\n    <line x1=\"12\" y1=\"14\" x2=\"12\" y2=\"14.01\" />\n  </svg>\n);\n\nexport { ReportIcon };\n","import React from \"react\";\n\nconst VersionIcon = (): JSX.Element => (\n  <svg\n    style={{ enableBackground: \"new 0 0 50 50;\" } as React.CSSProperties}\n    version=\"1.1\"\n    viewBox=\"0 0 50 50\"\n    xmlSpace=\"preserve\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n  >\n    <g id=\"version-icon-Layer_1\">\n      <path d=\"M21,5H10v4H1v32h9v4h11v4h28V1H21V5z M3,39V11h7v28H3z M12,43v-2V9V7h9v36H12z M23,3h24v44H23v-2V5V3z\" />\n    </g>\n    <g />\n  </svg>\n);\n\nexport { VersionIcon };\n","import React from \"react\";\n\nconst ResearchIcon = (): JSX.Element => (\n  <svg id=\"research-icon-outline\" height=\"512\" viewBox=\"0 0 512 512\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\">\n    <circle cx=\"56\" cy=\"48\" r=\"8\" />\n    <circle cx=\"80\" cy=\"48\" r=\"8\" />\n    <circle cx=\"104\" cy=\"48\" r=\"8\" />\n    <path d=\"m104 224a64 64 0 1 0 -64-64 64.07207 64.07207 0 0 0 64 64zm0-16a48.06511 48.06511 0 0 1 -8-.67944v-47.32056h12.68652l13.65625 13.65723a8.00181 8.00181 0 0 0 11.31446 0l13.65625-13.65723h4.68652a48.05375 48.05375 0 0 1 -48 48zm45.24805-64h-5.24805a8.00235 8.00235 0 0 0 -5.65723 2.34277l-10.34277 10.34375-10.34277-10.34375a8.00235 8.00235 0 0 0 -5.65723-2.34277h-16v-31.32056a47.93113 47.93113 0 0 1 53.24805 31.32056zm-69.24805-25.54248v25.54248h-21.248a48.24375 48.24375 0 0 1 21.248-25.54248zm0 41.54248v41.54248a48.01648 48.01648 0 0 1 -24-41.54248z\" />\n    <path d=\"m208 104h56v16h-56z\" />\n    <path d=\"m48 288h72v16h-72z\" />\n    <path d=\"m48 328h16v16h-16z\" />\n    <path d=\"m80 328h80v16h-80z\" />\n    <path d=\"m48 368h64v16h-64z\" />\n    <path d=\"m128 368h32v16h-32z\" />\n    <path d=\"m224 168h16v16h-16z\" />\n    <path d=\"m256 168h64v16h-64z\" />\n    <path d=\"m208 208h72v16h-72z\" />\n    <path d=\"m296 208h24v16h-24z\" />\n    <path d=\"m208 248h48v16h-48z\" />\n    <path d=\"m48 248h48v16h-48z\" />\n    <path d=\"m419.188 383.87354a96.05538 96.05538 0 1 0 -35.31446 35.31446l69.49853 69.49853a24.97109 24.97109 0 0 0 35.31445-35.31445zm-163.188-47.87354a80 80 0 1 1 80 80 80.09041 80.09041 0 0 1 -80-80zm153.897 61.21143 10.78855 10.78857-12.68555 12.68555-10.78857-10.78855a96.85589 96.85589 0 0 0 12.68557-12.68557zm61.1323 82.78857a8.9108 8.9108 0 0 1 -6.34278-2.62793l-45.37207-45.37207 12.68555-12.68555 45.37207 45.37207a8.97 8.97 0 0 1 -6.34277 15.31348z\" />\n    <path d=\"m352 216v-160a40.04584 40.04584 0 0 0 -40-40h-256a40.04584 40.04584 0 0 0 -40 40v336a40.04584 40.04584 0 0 0 40 40h192v-16h-56v-336h144v136zm-176 200h-120a24.0275 24.0275 0 0 1 -24-24v-312h144zm-144-352v-8a24.0275 24.0275 0 0 1 24-24h256a24.0275 24.0275 0 0 1 24 24v8z\" />\n    <path d=\"m336 272v16a48 48 0 1 1 -48 48h-16a64 64 0 1 0 64-64z\" />\n    <path d=\"m208 288h24v16h-24z\" />\n    <path d=\"m208 368h24v16h-24z\" />\n    <path d=\"m208 328h16v16h-16z\" />\n  </svg>\n);\n\nexport { ResearchIcon };\n","import React from \"react\";\n\nconst TranslationIcon = (): JSX.Element => (\n  <svg\n    id=\"translation-icon-Capa_1\"\n    enableBackground=\"new 0 0 512 512\"\n    height=\"512\"\n    viewBox=\"0 0 512 512\"\n    width=\"512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g>\n      <path d=\"m207.386 280.048c0-4.142-3.358-7.5-7.5-7.5h-168.338c-9.125 0-16.548-7.423-16.548-16.548v-224.452c0-9.125 7.423-16.548 16.548-16.548h224.452c9.125 0 16.548 7.423 16.548 16.548v168.338c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-168.338c0-17.396-14.152-31.548-31.548-31.548h-224.452c-17.396 0-31.548 14.152-31.548 31.548v224.452c0 17.396 14.152 31.548 31.548 31.548h168.338c4.142 0 7.5-3.358 7.5-7.5z\" />\n      <path d=\"m480.452 224.452h-64.129c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h64.129c9.125 0 16.548 7.423 16.548 16.548v224.452c0 9.125-7.423 16.548-16.548 16.548h-224.452c-9.125 0-16.548-7.423-16.548-16.548v-224.452c0-9.125 7.423-16.548 16.548-16.548h128.259c4.142 0 7.5-3.358 7.5-7.5s-3.358-7.5-7.5-7.5h-128.259c-17.396 0-31.548 14.152-31.548 31.548v224.452c0 17.396 14.152 31.548 31.548 31.548h224.452c17.396 0 31.548-14.152 31.548-31.548v-224.452c0-17.396-14.152-31.548-31.548-31.548z\" />\n      <path d=\"m215.919 80.161h-64.645v-8.532c0-4.142-3.358-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v8.532h-64.645c-4.142 0-7.5 3.358-7.5 7.5s3.358 7.5 7.5 7.5h110.446c-4.319 13.874-15.141 41.853-38.337 69.779-14.166-17.038-23.762-34.166-30.118-48.323-1.697-3.778-6.133-5.467-9.914-3.771-3.779 1.697-5.467 6.135-3.771 9.914 7.021 15.639 17.728 34.661 33.696 53.479-11.383 11.809-25.167 23.259-41.814 33.248-3.552 2.131-4.704 6.738-2.572 10.29 1.406 2.344 3.89 3.642 6.438 3.642 1.313 0 2.644-.345 3.852-1.07 17.648-10.589 32.225-22.703 44.2-35.007 12.11 12.434 26.701 24.462 44.276 35.007 1.208.725 2.539 1.07 3.852 1.07 2.548 0 5.032-1.298 6.438-3.642 2.131-3.552.979-8.159-2.572-10.29-16.676-10.005-30.473-21.447-41.88-33.265 11.789-13.878 20.436-27.488 26.589-38.914 9.956-18.49 15.043-34.033 17.292-42.148h18.189c4.142 0 7.5-3.358 7.5-7.5s-3.357-7.499-7.5-7.499z\" />\n      <path d=\"m378.434 295.254c-1.668-4.055-5.577-6.674-9.961-6.674-.003 0-.007 0-.011 0-4.388.004-8.297 2.631-9.958 6.693-.023.056-.045.113-.067.169l-54.181 142.258c-1.474 3.871.468 8.204 4.339 9.678.879.335 1.781.493 2.668.493 3.022 0 5.871-1.84 7.01-4.833l11.654-30.599h76.701l11.54 30.578c1.463 3.875 5.788 5.832 9.665 4.369 3.875-1.462 5.832-5.79 4.369-9.665l-53.688-142.264c-.025-.067-.052-.135-.08-.203zm-42.793 102.187 32.813-86.156 32.514 86.156z\" />\n      <path d=\"m204.387 410.323-32.064-24.048c-3.313-2.485-8.015-1.813-10.5 1.5s-1.813 8.015 1.5 10.5l14.064 10.548h-25.597c-26.806 0-48.613-21.808-48.613-48.613v-48.093c0-4.142-3.358-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v48.093c0 35.077 28.537 63.613 63.613 63.613h25.597l-14.064 10.548c-3.313 2.485-3.985 7.187-1.5 10.5 1.474 1.965 3.726 3 6.006 3 1.566 0 3.145-.489 4.494-1.5l32.064-24.048c1.889-1.417 3-3.639 3-6s-1.111-4.584-3-6z\" />\n      <path d=\"m307.613 101.677 32.064 24.048c1.349 1.012 2.928 1.5 4.494 1.5 2.28 0 4.533-1.036 6.006-3 2.485-3.313 1.813-8.015-1.5-10.5l-14.064-10.548h25.597c26.806 0 48.613 21.808 48.613 48.613v48.093c0 4.142 3.358 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-48.093c0-35.077-28.537-63.613-63.613-63.613h-25.597l14.064-10.548c3.313-2.485 3.985-7.187 1.5-10.5-2.486-3.314-7.186-3.985-10.5-1.5l-32.064 24.048c-1.889 1.417-3 3.639-3 6s1.111 4.584 3 6z\" />\n    </g>\n  </svg>\n);\n\nexport { TranslationIcon };\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { head, intersperse, tail } from \"ramda\";\nimport LanguageSelector from \"../../components/LanguageSelector/LanguageSelector\";\nimport { GithubLogo } from \"./GithubLogo\";\nimport { ReportIcon } from \"./ReportIcon\";\nimport { VersionIcon } from \"./VersionIcon\";\nimport { ResearchIcon } from \"./ResearchIcon\";\nimport { TranslationIcon } from \"./TranslationIcon\";\nimport { wrapWithLi } from \"../../common/utils/wrapWith\";\nimport { decapitateMapTail } from \"../../common/utils/decapitate\";\n\nconst InfoPageWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 20px 10px;\n  flex-direction: column;\n`;\n\nconst InfoIconWrapper = styled.span`\n  padding: 5px;\n  & > svg {\n    width: 40px;\n    height: 40px;\n  }\n`;\n\nconst InfoRow = styled.div`\n  width: 100%;\n  padding: 5px;\n  display: grid;\n  grid-template-columns: 60px 1fr;\n`;\n\nconst _LinkWrapper = styled.a`\n  max-width: 200px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n`;\nconst Link = ({ href, text }: { href: string; text: string }) => {\n  return (\n    <_LinkWrapper target=\"_blank\" href={href}>\n      {text}\n    </_LinkWrapper>\n  );\n};\nconst link = (text: string, href: string) => <Link text={text} href={href} />;\n\nconst ul = (rows: React.ReactNode[][]) => {\n  return <ul>{rows.map(decapitateMapTail(wrapWithLi))}</ul>;\n};\n\nconst infoRows: React.ReactNode[][] = [\n  [<VersionIcon key=\"icon\" />, \"Version: 0.0.10 (very alpha)\"],\n  [\n    <ReportIcon key=\"icon\" />,\n    \"You can post issues or feature requests here:\",\n    link(\"Link to GH issues\", \"https://github.com/Duelsik/beatsaber-request-ui/issues\")\n  ],\n  [\n    <GithubLogo key=\"icon\" />,\n    \"This extension is opensource!\",\n    link(\"Link to repository\", \"https://github.com/Duelsik/beatsaber-request-ui\")\n  ],\n  [\n    <TranslationIcon key=\"icon\" />,\n    \"If you want to help with translations - feel free to create an issue on github to get in touch\"\n  ],\n  [\n    <ResearchIcon key=\"icon\" />,\n    \"This project uses 3rd party resources:\",\n    ul([\n      [\n        \"Other projects:\",\n        link(\"BeatSaver (BS Map service)\", \"https://beatsaver.com/\"),\n        link(\"ScoreSaber (BS Score service)\", \"https://scoresaber.com/\"),\n        link(\"BeatFollower (BS playlist manager and sm)\", \"https://www.beatfollower.com/\")\n      ],\n      [\n        \"Graphics:\",\n        link(\"Github logo icon\", \"https://www.flaticon.com/free-icon/github-logo_25231\"),\n        link(\"Report icon\", \"https://icon-icons.com/icon/message-report/151198\"),\n        link(\"Version icon\", \"https://www.iconfinder.com/icons/3209198/episode_event_front_statement_version_icon\"),\n        link(\"Translation icon\", \"https://www.flaticon.com/free-icon/translation_2793765\"),\n        link(\"This icon to the left\", \"https://www.flaticon.com/free-icon/research_2271541\"),\n        link(\"Copy icon\", \"https://www.flaticon.com/free-icon/copy_2911213\"),\n        link(\"Loading animation\", \"https://loading.io/\"),\n        link(\n          \"Exclamation mark icon\",\n          \"https://www.kindpng.com/imgv/iixoxmh_black-exclamation-mark-png-transparent-png/\"\n        ),\n        link(\n          \"Question mark icon\",\n          \"https://www.pngarea.com/view/e5f64df6_question-mark-png-question-mark-free-icon-png/\"\n        ),\n        link(\"Gif used on configuration page\", \"https://i.giphy.com/media/obN7DdnUWxuyqz5qZS/giphy.webp\")\n      ]\n    ])\n  ]\n];\n\nconst renderInfoRowArr = (infoRowItemArr: React.ReactNode[]): JSX.Element => {\n  const icon = head(infoRowItemArr);\n  const content = tail(infoRowItemArr);\n  return (\n    <InfoRow>\n      <InfoIconWrapper>{icon}</InfoIconWrapper>\n      <span>{intersperse(<br />, content)}</span>\n    </InfoRow>\n  );\n};\n\nconst InfoPageContent = () => {\n  return (\n    <InfoPageWrapper>\n      <LanguageSelector />\n      {infoRows.map(renderInfoRowArr)}\n    </InfoPageWrapper>\n  );\n};\n\nexport default function InfoPage(): JSX.Element {\n  return <InfoPageContent />;\n}\n","import { head, tail } from \"ramda\";\n\ntype DecapitateReturnType = [ReturnType<typeof head>, ReturnType<typeof tail>];\n\nconst decapitate = <T>(items: T[]): DecapitateReturnType => {\n  const first = head(items);\n  const rest = tail(items);\n  return [first, rest];\n};\n\nconst decapitateMapTail =\n  <T, U>(fn: (item: T, index: number) => U) =>\n  (items: T[]): DecapitateReturnType => {\n    const first = head(items);\n    const rest = tail(items);\n    return [first, rest.map(fn)];\n  };\n\nexport { decapitate, decapitateMapTail };\n","import React from \"react\";\nimport { SongListContainer } from \"../../components/SongList/SongListContainer\";\nimport AppEnvContext from \"../../AppEnvContext\";\nimport { SongListItem } from \"../../components/SongList/SongListItem\";\nimport { isCreatedByAutomapper } from \"../../utils\";\nimport { LayoutRowBase } from \"../../components/LayoutRow/LayoutRow\";\nimport styled from \"styled-components\";\nimport { RankedRecordMap } from \"../../integrations/scoresaber/scoreSaberImportRankedMapsData\";\nimport { usePaginatedData } from \"../../common/hooks/usePaginatedData\";\n\nconst BeatfollowerPageContainer = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SubnavigationContainer = styled.div`\n  margin: 10px 5px 2px 5px;\n`;\n\nconst StyledSelect = styled.select`\n  max-width: 100%;\n  position: relative;\n  box-sizing: border-box;\n  height: 40px;\n  background-color: var(--background-input);\n  border: 1px solid var(--border);\n  border-radius: 20px;\n  color: var(--text);\n  font-size: 1.2rem;\n  padding: 5px 40px 5px 20px;\n\n  outline: none;\n  -moz-appearance: none; /* Firefox */\n  -webkit-appearance: none; /* Safari and Chrome */\n  appearance: none;\n`;\n\ntype BeatfollowerTopPlayedResponseItemBody = {\n  _id: string;\n  easy: boolean;\n  normal: boolean;\n  hard: boolean;\n  expert: boolean;\n  expertPlus: boolean;\n  wipMap: boolean;\n  ost: boolean;\n  songDuration: string;\n  songName: string;\n  songSubName: string;\n  songAuthorName: string;\n  levelAuthorName: string;\n  hash: string;\n  coverUrl: string;\n  key: string;\n  __v: number;\n};\ntype BeatfollowerTopPlayedResponseItem = {\n  count: number;\n  song: BeatfollowerTopPlayedResponseItemBody;\n};\ntype BeatfollowerTopPlayedResponse = BeatfollowerTopPlayedResponseItem[];\n\nconst Item = (rankedHashes: RankedRecordMap) => {\n  const _Item = (_data: BeatfollowerTopPlayedResponseItem) => {\n    const data = _data.song;\n\n    const coverURL = `https://cdn.beatmaps.io/${data.hash.toLowerCase()}.jpg`;\n    const shouldBeHidden = isCreatedByAutomapper(data.songName, data.songAuthorName, data.levelAuthorName);\n\n    if (shouldBeHidden) return <></>;\n\n    const isRanked = !!rankedHashes[data.hash.toLowerCase()];\n    return (\n      <SongListItem\n        hash={data.hash}\n        coverURL={coverURL}\n        songName={data.songName}\n        songAuthorName={data.songAuthorName}\n        levelAuthorName={data.levelAuthorName}\n        bsrKey={data.key}\n        downloads={null}\n        upVotes={null}\n        downVotes={null}\n        percentVotes={null}\n        isRanked={isRanked}\n        easy={!!data.easy}\n        normal={!!data.normal}\n        hard={!!data.hard}\n        expert={!!data.expert}\n        expertPlus={!!data.expertPlus}\n      />\n    );\n  };\n  return _Item;\n};\n\nconst _ItemList = ({\n  results,\n  rankedHashes\n}: {\n  results: BeatfollowerTopPlayedResponse;\n  rankedHashes: RankedRecordMap;\n}) => {\n  const renderedItems = results.map(Item(rankedHashes));\n\n  return <SongListContainer>{renderedItems}</SongListContainer>;\n};\n\nfunction ItemList({ results }: { results: null | BeatfollowerTopPlayedResponse }): JSX.Element | null {\n  if (results) {\n    return (\n      <AppEnvContext.Consumer>\n        {(context) => (\n          <_ItemList results={results as BeatfollowerTopPlayedResponse} rankedHashes={context.rankedHashes} />\n        )}\n      </AppEnvContext.Consumer>\n    );\n  }\n  return null;\n}\n\ntype TabVariant =\n  | \"top/played/today\"\n  | \"top/played/week\"\n  | \"top/played/month\"\n  | \"top/played/alltime\"\n  | \"top/recommended/today\"\n  | \"top/recommended/week\"\n  | \"top/recommended/month\"\n  | \"top/recommended/alltime\";\n\nconst mapResponsesToItems = (pages: BeatfollowerTopPlayedResponse[]): BeatfollowerTopPlayedResponseItem[] => {\n  return pages.flatMap((page) => {\n    return page.flat();\n  });\n};\n\nexport default function BeatfollowerPage(): JSX.Element {\n  const [tab, setTab] = React.useState<TabVariant>(\"top/played/week\");\n\n  const getUrl = React.useCallback(() => {\n    return `https://api.beatfollower.com/${tab}`;\n  }, [tab]);\n\n  const [results, isFetching, isError, initialFetch, , clearData] = usePaginatedData(getUrl, mapResponsesToItems, {\n    initialPageNumber: 0\n  });\n\n  React.useEffect(() => {\n    initialFetch();\n  }, [initialFetch]);\n\n  const selectOnChange = React.useCallback(\n    (value: React.ChangeEvent<HTMLSelectElement>) => {\n      value?.currentTarget?.blur();\n      const newTab = value.target.value;\n      clearData();\n      setTab(newTab as TabVariant);\n    },\n    [setTab, clearData]\n  );\n\n  return (\n    <BeatfollowerPageContainer>\n      <LayoutRowBase>\n        <SubnavigationContainer>\n          <StyledSelect value={tab} onChange={selectOnChange}>\n            {/* <option value=\"recommendation/PiercyTTV/0/50\">Recommendations from PiercyTTV</option>\n            <option value=\"recommendation/Danielduel/0/50\">Recommendations from Danielduel</option>\n            <option value=\"recommendation/LicensedCrime/0/50\">Recommendations from LicensedCrime</option>\n            <option value=\"recommendation/Taragon123/0/50\">Recommendations from Taragon123</option>\n            <option value=\"recommendation/phat32/0/50\">Recommendations from phat32</option> */}\n            <option value=\"top/played/today\">Top played today</option>\n            <option value=\"top/played/week\">Top played this week</option>\n            <option value=\"top/played/month\">Top played this month</option>\n            <option value=\"top/played/alltime\">Top played alltime</option>\n            <option value=\"top/recommended/today\">Top recommended today</option>\n            <option value=\"top/recommended/week\">Top recommended this week</option>\n            <option value=\"top/recommended/month\">Top recommended this month</option>\n            <option value=\"top/recommended/alltime\">Top recommended alltime</option>\n          </StyledSelect>\n        </SubnavigationContainer>\n      </LayoutRowBase>\n      <SongListContainer>\n        <ItemList results={results} />\n        {isFetching ?? \"Fetching...\"}\n        {isError ?? \"Error!\"}\n      </SongListContainer>\n    </BeatfollowerPageContainer>\n  );\n}\n","import React from \"react\";\nimport { Translation, useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport AppEnvContext from \"../../AppEnvContext\";\n\nfunction conditionalCssDependingOnPosition(\n  x: number,\n  y: number,\n  top: string,\n  bottom: string,\n  left: string,\n  right: string,\n  merge: (horizontal: string, vertical: string) => string\n) {\n  const _horizontal = x > 50 ? right : left;\n  const _vertical = y > 50 ? bottom : top;\n  return merge(_horizontal, _vertical);\n}\n\nconst AppUnexpandedWrapperWrapper = styled.div`\n  position: fixed;\n  padding: 15px;\n  width: 100vw;\n  height: 100vh;\n  box-sizing: border-box;\n`;\n\nconst AppUnexpandedWrapper = styled.div`\n  background: #5f2c82;\n\n  animation-name: initialBubbleAnimation;\n  animation-duration: 10s;\n\n  position: relative;\n  width: 30px;\n  height: 30px;\n\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  border: 4px solid #210633;\n\n  // Those isNaNs are defensive code placed here\n  // in order to be 300% sure that it can't be exploited\n  ${({ x, y }: { x: number; y: number }) => `\n  left: ${!isNaN(x) ? x : \"0\"}%;\n  top: ${!isNaN(y) ? y : \"0\"}%;\n`}\n\n  opacity: 0;\n  transition: all 0.3s ease-in-out;\n\n  &:hover {\n    height: 70px;\n    width: 70px;\n    opacity: 1;\n    animation: none;\n  }\n\n  &:hover > div {\n    visibility: visible;\n    opacity: 1;\n  }\n`;\n\nconst AppUnexpandedTooltip = styled.div`\n  width: 200px;\n  position: relative;\n  top: 50%;\n  left: 50%;\n  opacity: 0;\n  transition: opacity 0.3s ease-in-out;\n  background: rgba(255, 255, 255, 0.5);\n  padding: 15px 20px;\n  animation-name: initialBubbleTooltipAnimation;\n  animation-duration: 4s;\n\n  ${({ x, y }: { x: number; y: number }) => {\n    return conditionalCssDependingOnPosition(\n      x,\n      y,\n      \"0\",\n      \"-100%\",\n      \"0\",\n      \"-240px\",\n      (h, v) => `\n    transform: translate(${h}, ${v});\n  `\n    );\n  }}\n\n  &:before {\n    height: 30px;\n    width: 5px;\n    background: black;\n    position: absolute;\n    content: \" \";\n    ${({ x, y }: { x: number; y: number }) => {\n      return conditionalCssDependingOnPosition(\n        x,\n        y,\n        \"top: 0;\",\n        \"bottom: 0;\",\n        \"left: 0;\",\n        \"right: 0;\",\n        (h, v) => `\n      ${h} ${v}\n    `\n      );\n    }}\n  }\n  &:after {\n    height: 5px;\n    width: 30px;\n    background: black;\n    position: absolute;\n    content: \" \";\n    ${({ x, y }: { x: number; y: number }) => {\n      return conditionalCssDependingOnPosition(\n        x,\n        y,\n        \"top: 0;\",\n        \"bottom: 0;\",\n        \"left: 0;\",\n        \"right: 0;\",\n        (h, v) => `\n      ${h} ${v}\n    `\n      );\n    }}\n  }\n`;\n\ntype UnexpandedAppProps = {\n  togglePanel: (state: boolean) => void;\n};\n\nconst UnexpandedApp = ({ togglePanel }: UnexpandedAppProps): JSX.Element | null => {\n  const [t] = useTranslation();\n  const { configuration } = React.useContext(AppEnvContext);\n\n  if (!configuration) {\n    return null;\n  }\n\n  const panelPosition = configuration.broadcaster.panelPosition;\n\n  return (\n    <AppUnexpandedWrapperWrapper>\n      <AppUnexpandedWrapper x={panelPosition.x} y={panelPosition.y} onClick={() => togglePanel(true)}>\n        <AppUnexpandedTooltip x={panelPosition.x} y={panelPosition.y}>\n          {t(\"Click to open an extension\")}\n          <br />\n          {t(\"this should make it easier to make requests\")}\n        </AppUnexpandedTooltip>\n      </AppUnexpandedWrapper>\n    </AppUnexpandedWrapperWrapper>\n  );\n};\n\nexport { UnexpandedApp };\n","import styled from \"styled-components\";\nimport { FooterProps } from \"./Footer\";\n\ntype FooterWrapperProps = Pick<FooterProps, \"shouldRenderFooter\">;\nconst FooterWrapper = styled.div`\n  ${({ shouldRenderFooter }: FooterWrapperProps) => {\n    return shouldRenderFooter ? \"\" : \"display: none;\";\n  }}\n  height: var(--footer-height, 0px);\n  background: var(--background-primary);\n`;\n\nexport { FooterWrapper };\n","import React, { useContext } from \"react\";\nimport AppEnvContext from \"../../AppEnvContext\";\nimport { ScoreSaberBar } from \"../ScoreSaberBar/ScoreSaberBar\";\nimport { FooterWrapper } from \"./FooterWrapper\";\n\ntype FooterProps = {\n  shouldRenderFooter: boolean;\n};\n\nconst Footer = ({ shouldRenderFooter }: FooterProps): JSX.Element => {\n  const { configuration } = useContext(AppEnvContext);\n  if (!configuration || !configuration.broadcaster.scoreSaber) {\n    return <></>;\n  }\n\n  return (\n    <FooterWrapper shouldRenderFooter={shouldRenderFooter}>\n      <ScoreSaberBar scoreSaberId={configuration.broadcaster.scoreSaber.id} />\n    </FooterWrapper>\n  );\n};\n\nexport { Footer };\nexport type { FooterProps };\n","import React, { useCallback } from \"react\";\nimport styled from \"styled-components\";\nimport { MemoryRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport \"./App.css\";\n\nimport Header from \"./components/Header/Header\";\nimport SearchPage from \"./pages/SearchPage/SearchPage\";\nimport InfoPage from \"./pages/InfoPage/InfoPage\";\nimport BeatfollowerPage from \"./pages/BeatfollowerPage/BeatfollowerPage\";\n\nimport \"./i18n/init-i18n\";\nimport { BodyWithNavigation, BodyWithNavigationBody } from \"./layouts/BodyWithNavigation\";\nimport { UnexpandedApp } from \"./components/UnexpandedApp/UnexpandedApp\";\nimport AppEnvContext from \"./AppEnvContext\";\nimport { Footer } from \"./components/Footer/Footer\";\nimport { isLocalhost } from \"./constants\";\n\nexport const AppWrapper = styled.div`\n  height: 100vh;\n  max-height: 100vh;\n  width: min(100vw, 500px);\n  overflow-x: hidden;\n  position: relative;\n`;\n\ntype MainAppProps = {\n  togglePanel: ((state: boolean) => void) | null;\n};\n\nconst Navigation = ({ togglePanel }: Pick<MainAppProps, \"togglePanel\">) => {\n  return <Header togglePanel={togglePanel}></Header>;\n};\n\nconst Routing = () => (\n  <BodyWithNavigationBody>\n    <Switch>\n      <Route exact path=\"/\">\n        <SearchPage />\n      </Route>\n      <Route path=\"/beatfollower\">\n        <BeatfollowerPage />\n      </Route>\n      <Route path=\"/info\">\n        <InfoPage />\n      </Route>\n    </Switch>\n  </BodyWithNavigationBody>\n);\n\nconst MainApp = ({ togglePanel }: MainAppProps): JSX.Element => {\n  const { configuration } = React.useContext(AppEnvContext);\n  const scoreSaberConfig = configuration?.broadcaster.scoreSaber || null;\n  const shouldRenderFooter = !!scoreSaberConfig;\n\n  React.useLayoutEffect(() => {\n    if (isLocalhost) {\n      document.body.style.background = \"black\";\n    }\n  }, []);\n\n  console.log(configuration?.broadcaster);\n  console.log(\"Should render footer: \" + shouldRenderFooter);\n\n  return (\n    <Router>\n      <AppWrapper>\n        <BodyWithNavigation shouldRenderFooter={shouldRenderFooter}>\n          <Navigation togglePanel={togglePanel} />\n          <Routing />\n          <Footer shouldRenderFooter={shouldRenderFooter} />\n        </BodyWithNavigation>\n      </AppWrapper>\n    </Router>\n  );\n};\n\nexport function FullVideoApp(): JSX.Element {\n  const [isExpanded, setExpanded] = React.useState(false);\n  const togglePanel = useCallback(\n    (state: boolean) => {\n      setExpanded(state);\n    },\n    [setExpanded]\n  );\n\n  if (isExpanded) {\n    return <MainApp togglePanel={togglePanel} />;\n  }\n\n  return <UnexpandedApp togglePanel={togglePanel} />;\n}\n\nexport function MobileApp(): JSX.Element {\n  return <MainApp togglePanel={null} />;\n}\n\nexport function PanelApp(): JSX.Element {\n  return <MainApp togglePanel={null} />;\n}\n","import React, { ChangeEvent } from \"react\";\n\ntype BoundableHTMLElements = HTMLInputElement | HTMLSelectElement;\ntype BoundableEvents = \"onchange\";\ntype BoundableEvent2EventType<B extends BoundableEvents, E extends HTMLElement> = B extends \"onchange\"\n  ? ChangeEvent<E>\n  : never;\n\nexport const getGetValueFromEvent = <B extends BoundableEvents, E extends BoundableHTMLElements>(\n  eventToBindTo: B\n): ((e: BoundableEvent2EventType<B, E>) => string) => {\n  switch (eventToBindTo) {\n    case \"onchange\":\n      return (e) => e.target.value;\n  }\n  return () => \"\";\n};\n\nexport const useFormField = <E extends BoundableHTMLElements, T>(\n  initialValue: T,\n  eventToBindTo: BoundableEvents = \"onchange\",\n  onEvent: (value: T) => void = (v: T) => void 0,\n  transform: (value: string) => T = (s: string) => s as unknown as T\n) => {\n  const [value, _setValue] = React.useState<T>(initialValue);\n  const [dirty, setDirty] = React.useState(false);\n\n  const setValue = React.useCallback(\n    (value: T) => {\n      _setValue(value);\n      setDirty(true);\n    },\n    [_setValue, setDirty]\n  );\n\n  const getValueFromEvent = React.useMemo(() => getGetValueFromEvent(eventToBindTo), [eventToBindTo]);\n  const sinkEvent = React.useCallback(\n    (event: BoundableEvent2EventType<typeof eventToBindTo, E>) => {\n      const value = getValueFromEvent(event);\n      const transformedValue = transform(value);\n      onEvent(transformedValue);\n      setValue(transformedValue);\n    },\n    [transform, setValue, getValueFromEvent]\n  );\n\n  return {\n    value,\n    setValue,\n    dirty,\n    setDirty,\n    sinkEvent\n  } as const;\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype ServiceWorkerConfig = any;\nconst processEnv = process.env as {\n  PUBLIC_URL: string;\n  NODE_ENV: string;\n};\n\nexport function register(config: ServiceWorkerConfig) {\n  if (processEnv.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(processEnv.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${processEnv.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config: ServiceWorkerConfig) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config: ServiceWorkerConfig) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" }\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (response.status === 404 || (contentType != null && contentType.indexOf(\"javascript\") === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport { createConfiguredEventHandler } from \"../most/createConfiguredEventHandler\";\n\nfunction useRefetchingData<T>(fetchData: () => Promise<T>, initialFetch = true) {\n  const { handler, stream: data$ } = createConfiguredEventHandler<T>();\n\n  const fetchDataCb = React.useCallback(() => {\n    fetchData().then(handler);\n  }, [fetchData]);\n\n  React.useEffect(() => {\n    if (initialFetch) {\n      fetchDataCb();\n    }\n  }, []);\n\n  return [data$, fetchDataCb] as const;\n}\n\nexport { useRefetchingData };\n","import { css } from \"styled-components\";\n\nconst hideScrollbars = css`\n  /* Hide scrollbar */\n  &::-webkit-scrollbar {\n    display: none;\n  }\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n`;\n\nexport { hideScrollbars };\n","import styled from \"styled-components\";\nimport { hideScrollbars } from \"../common/styles/hideScrollbars\";\n\ntype BodyWithNavigationProps = {\n  shouldRenderFooter: boolean;\n};\nconst BodyWithNavigation = styled.div`\n  display: grid;\n  min-width: 100%;\n  min-height: 100vh;\n  max-height: 100vh;\n  grid-template-columns: 1fr;\n  ${({ shouldRenderFooter }: BodyWithNavigationProps) => {\n    return shouldRenderFooter\n      ? \"grid-template-rows: var(--navigation-height) 1fr var(--footer-height, 0px)\"\n      : \"grid-template-rows: var(--navigation-height) 1fr\";\n  }};\n\n  background-color: var(--background);\n`;\n\nconst BodyWithNavigationBody = styled.div`\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  ${hideScrollbars}\n`;\n\nexport { BodyWithNavigation, BodyWithNavigationBody };\n","import React from \"react\";\nimport emojiFlags from \"emoji-flags\";\nimport styled from \"styled-components\";\nimport { ScoreSaber } from \"../../integrations/scoresaber/scoreSaberTypes\";\nimport { useRefetchingData } from \"../../common/hooks/useRefetchingData\";\nimport { scoreSaberFetchBasicPlayerData } from \"../../integrations/scoresaber/scoreSaberFetchBasicPlayerData\";\nimport { useStreamSubscribe } from \"../../common/hooks/useStreamSubscribe\";\nimport { getScoresaberAvatarUrl } from \"../../common/utils/getScoresaberAvatarUrl\";\nimport { Button } from \"../Buttons/Button\";\n\ntype ScoreSaberBarProps = {\n  scoreSaberId: string;\n  withoutReload?: boolean;\n};\n\nconst ScoreSaberBarWrapper = styled.div`\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n  margin: 0em 0.5em;\n  align-items: center;\n`;\n\nconst ScoreSaberBarWrapperNoResults = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 100%;\n  width: 100%;\n  padding: 1rem;\n`;\n\nconst ScoreSaberBarPlayerAvatar = styled.img`\n  height: 5em;\n  border-radius: 1em;\n`;\n\nconst ScoreSaberBarPlayerDataContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  padding: 1em 0 0 0.5em;\n  box-sizing: border-box;\n`;\n\nconst ScoreSaberBarPlayerName = styled.div`\n  font-size: 1.1em;\n`;\n\nconst ScoreSaberBarPlayerRanking = styled.div`\n  font-size: 0.9em;\n`;\n\nconst ScoreSaberBarPlayerPP = styled.div`\n  font-family: \"consolas\";\n`;\n\nconst ScoreSaberBarPlayerActionContainer = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: flex-end;\n  justify-content: flex-end;\n`;\n\nconst ScoreSaberBarPlayerReload = styled(Button)``;\n\n// https://scoresaber.com/imports/images/usr-avatars/76561198023909718.jpg\nconst _ScoreSaberBar = ({ scoreSaberId, withoutReload }: ScoreSaberBarProps) => {\n  const [scoreSaberBasicPlayerData, setScoreSaberBasicPlayerData] =\n    React.useState<null | ScoreSaber.BasicPlayerResponse>(null);\n  const [scoreSaberBasicPlayerData$, refetchScoreSaberBasicPlayerData] = useRefetchingData(\n    scoreSaberFetchBasicPlayerData(scoreSaberId)\n  );\n  useStreamSubscribe(scoreSaberBasicPlayerData$, setScoreSaberBasicPlayerData);\n\n  if (!scoreSaberBasicPlayerData || !scoreSaberBasicPlayerData.playerInfo) {\n    return <ScoreSaberBarWrapperNoResults>Can&apos;t find this player</ScoreSaberBarWrapperNoResults>;\n  }\n\n  const avatarUrl = getScoresaberAvatarUrl(scoreSaberBasicPlayerData?.playerInfo.avatar ?? \"\");\n\n  const { playerName, rank, country, countryRank, pp } = scoreSaberBasicPlayerData.playerInfo;\n  const emojiFlag = emojiFlags.countryCode(country).emoji ?? \"❓\";\n\n  return (\n    <ScoreSaberBarWrapper>\n      <ScoreSaberBarPlayerAvatar src={avatarUrl} />\n      <ScoreSaberBarPlayerDataContainer>\n        <ScoreSaberBarPlayerName>{playerName}</ScoreSaberBarPlayerName>\n        <ScoreSaberBarPlayerRanking>\n          🌎 {rank} ({emojiFlag} {countryRank})\n        </ScoreSaberBarPlayerRanking>\n        <ScoreSaberBarPlayerPP>{pp}pp</ScoreSaberBarPlayerPP>\n      </ScoreSaberBarPlayerDataContainer>\n      {!withoutReload && (\n        <ScoreSaberBarPlayerActionContainer>\n          <ScoreSaberBarPlayerReload onClick={refetchScoreSaberBasicPlayerData}>Reload</ScoreSaberBarPlayerReload>\n        </ScoreSaberBarPlayerActionContainer>\n      )}\n    </ScoreSaberBarWrapper>\n  );\n};\n\nconst ScoreSaberBar = ({ scoreSaberId, withoutReload }: ScoreSaberBarProps) => {\n  if (!scoreSaberId) {\n    return <ScoreSaberBarWrapperNoResults>ScoreSaber ID is empty</ScoreSaberBarWrapperNoResults>;\n  }\n\n  return <_ScoreSaberBar scoreSaberId={scoreSaberId} withoutReload={withoutReload} />;\n};\n\nexport { ScoreSaberBar };\n","import { ScoreSaber } from \"./scoreSaberTypes\";\n\nconst scoreSaberFetchBasicPlayerData = (playerId: string) => (): Promise<ScoreSaber.BasicPlayerResponse> => {\n  return new Promise((resolve, reject) => {\n    fetch(`https://new.scoresaber.com/api/player/${playerId}/basic`)\n      .then((res) => res.json())\n      .then(resolve)\n      .catch(reject);\n  });\n};\n\nexport { scoreSaberFetchBasicPlayerData };\n","const getScoresaberAvatarUrl = (url: string): string => `https://new.scoresaber.com${url}`;\n\nexport { getScoresaberAvatarUrl };\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ButtonLink, Button, ButtonAsItem, ButtonAsItemProps } from \"./Button\";\n\nconst GroupButtonContainer = styled.div`\n  display: flex;\n  & > ${Button}, & > ${ButtonLink} {\n    /* First button */\n    &:first-child {\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n      border-right: 1px solid var(--border);\n    }\n    /* Last button */\n    &:last-child {\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n    }\n    /* Middle button */\n    &:not(:first-child):not(:last-child) {\n      border-top-right-radius: 0;\n      border-bottom-right-radius: 0;\n      border-top-left-radius: 0;\n      border-bottom-left-radius: 0;\n      border-right: 1px solid var(--border);\n    }\n  }\n`;\n\nexport type GroupButtonProps = {\n  className?: string;\n  group: ButtonAsItemProps[];\n};\n\nconst GroupButton = ({ group, className }: GroupButtonProps): JSX.Element => {\n  return <GroupButtonContainer className={className}>{group.map(ButtonAsItem)}</GroupButtonContainer>;\n};\n\nexport { GroupButton };\n","export const beString = (s: string) => String(s) === s;\nexport const beProperNumber = (n: number) => !isNaN(n);\n","import { Validator } from \"fluentvalidation-ts\";\nimport { beProperNumber, beString } from \"../utils/validators\";\n\nexport type BroadcasterConfigurationPanelPosition = {\n  x: number;\n  y: number;\n};\n\nexport type BroadcasterConfigurationScoreSaber = {\n  id: string;\n};\n\nexport type BroadcasterConfiguration = {\n  panelPosition: BroadcasterConfigurationPanelPosition;\n\n  scoreSaberEnabled: boolean;\n  scoreSaber: BroadcasterConfigurationScoreSaber | null;\n};\n\nexport class PanelPositionBroadcasterConfigurationValidator extends Validator<BroadcasterConfigurationPanelPosition> {\n  constructor() {\n    super();\n    const allowedRange = [-200, 200] as [number, number];\n\n    this.ruleFor(\"x\")\n      .notNull()\n      .must(beProperNumber)\n      .inclusiveBetween(...allowedRange);\n\n    this.ruleFor(\"y\")\n      .notNull()\n      .must(beProperNumber)\n      .inclusiveBetween(...allowedRange);\n  }\n}\nexport const panelPositionBroadcasterConfigurationValidator = new PanelPositionBroadcasterConfigurationValidator();\n\nexport class ScoreSaberBroadcasterConfigurationValidator extends Validator<BroadcasterConfigurationScoreSaber> {\n  constructor() {\n    super();\n\n    this.ruleFor(\"id\").notNull().must(beString).maxLength(100);\n  }\n}\nexport const scoreSaberBroadcasterConfigurationValidator = new ScoreSaberBroadcasterConfigurationValidator();\n\nexport class BroadcasterConfigurationValidator extends Validator<BroadcasterConfiguration> {\n  constructor() {\n    super();\n\n    this.ruleFor(\"scoreSaberEnabled\").notNull();\n\n    this.ruleFor(\"scoreSaber\")\n      .notNull()\n      .setValidator(() => scoreSaberBroadcasterConfigurationValidator)\n      .unless((config) => !config.scoreSaberEnabled);\n\n    this.ruleFor(\"panelPosition\")\n      .notNull()\n      .setValidator(() => panelPositionBroadcasterConfigurationValidator);\n  }\n}\nexport const broadcasterConfigurationValidator = new BroadcasterConfigurationValidator();\n","import { Validator } from \"fluentvalidation-ts\";\nimport { BroadcasterConfiguration, broadcasterConfigurationValidator } from \"./BroadcasterConfiguration\";\n\nexport type GlobalConfiguration = null;\nexport type DeveloperConfiguration = null;\nexport type AppConfiguration = {\n  broadcaster: BroadcasterConfiguration;\n  developer: DeveloperConfiguration;\n  global: GlobalConfiguration;\n};\n\nexport class AppConfigurationValidator extends Validator<AppConfiguration> {\n  constructor() {\n    super();\n\n    this.ruleFor(\"global\").equal(null);\n\n    this.ruleFor(\"developer\").equal(null);\n\n    this.ruleFor(\"broadcaster\")\n      .notNull()\n      .setValidator(() => broadcasterConfigurationValidator);\n  }\n}\n\nexport const appConfigurationValidator = new AppConfigurationValidator();\n\nexport const createAppConfigurationFromConfigs = (\n  broadcaster: BroadcasterConfiguration,\n  developer: DeveloperConfiguration,\n  global: GlobalConfiguration\n): AppConfiguration => {\n  const result: AppConfiguration = {\n    broadcaster,\n    developer,\n    global\n  };\n\n  const validationResult = { ...appConfigurationValidator.validate(result) };\n  const configInvalid = [\"global\", \"developer\", \"broadcaster\"].some((configKey) =>\n    Object.keys(validationResult).includes(configKey)\n  );\n\n  if (configInvalid) throw validationResult;\n  return result;\n};\n","import React from \"react\";\nimport { isLocalhost } from \"../../constants\";\nimport { AppConfiguration, createAppConfigurationFromConfigs } from \"../config/AppConfiguration\";\nimport { BroadcasterConfiguration } from \"../config/BroadcasterConfiguration\";\nimport { createConfiguredEventHandler } from \"../most/createConfiguredEventHandler\";\n\ntype ExtConfig = Pick<typeof Twitch.ext.configuration, \"broadcaster\" | \"developer\" | \"global\">;\n\nexport const deserializeTwitchExtConfiguration = (extConfig: ExtConfig): AppConfiguration | undefined => {\n  let broadcasterObject = null;\n  const gloablObject = null;\n  const developerObject = null;\n  try {\n    const broadcasterContent = extConfig.broadcaster?.version !== \"2\" ? \"{}\" : extConfig.broadcaster?.content;\n    broadcasterObject = JSON.parse(broadcasterContent) as BroadcasterConfiguration;\n  } catch (_) {} // error parsing\n  if (!broadcasterObject) return;\n\n  try {\n    // left space\n  } catch (_) {} // error parsing\n\n  try {\n    // left space\n  } catch (_) {} // error parsing\n\n  try {\n    return createAppConfigurationFromConfigs(broadcasterObject, developerObject, gloablObject);\n  } catch (_) {} // validation error\n};\n\nfunction useTwitchExtConfigurationOnChanged() {\n  // not sure if app can miss config event due to loading time\n  // but I don't know how to handle it without hacks atm\n  // so if somebody (most likely me) will have problems with\n  // config being not populated - this is most likely the issue\n\n  const { handler, stream: data$ } = createConfiguredEventHandler<AppConfiguration>();\n\n  React.useEffect(() => {\n    if (isLocalhost) {\n      // this has to be delayed\n      setTimeout(() => {\n        // v1:\n        // handler(appConfigurationFromStrings(\"overlay|topLeft;ss://76561198023909718\", \"\", \"\"));\n        // handler(appConfigurationFromStrings(\"overlay|topLeft;\", \"\", \"\"));\n        // handler(appConfigurationFromStrings(\"panel;ss://76561198023909718\", \"\", \"\"));\n        handler(\n          createAppConfigurationFromConfigs(\n            {\n              panelPosition: { x: 0, y: 0 },\n              scoreSaber: { id: \"76561198023909718\" },\n              scoreSaberEnabled: true\n            },\n            null,\n            null\n          )\n        );\n      }, 0);\n    }\n\n    Twitch.ext.configuration.onChanged(() => {\n      console.log(\"Twitch ext:\");\n      console.log(Twitch.ext);\n      console.log(\"Broadcaster content: \" + Twitch.ext.configuration.broadcaster?.content);\n\n      const newConfig = deserializeTwitchExtConfiguration(Twitch.ext.configuration);\n\n      if (!newConfig) {\n        console.error(\"BSR UI Wrong config\");\n        return;\n      }\n\n      handler(newConfig);\n    });\n  }, []);\n\n  return [data$] as const;\n}\n\nexport { useTwitchExtConfigurationOnChanged };\n","module.exports = __webpack_public_path__ + \"static/media/beatfollower.d307861d.png\";","module.exports = __webpack_public_path__ + \"static/media/beatsaver.3f7a521b.png\";","module.exports = __webpack_public_path__ + \"static/media/loading.05a91237.gif\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/notfound.6fb7b5f2.png\";","module.exports = __webpack_public_path__ + \"static/media/exclamation_mark.0588c926.png\";","module.exports = __webpack_public_path__ + \"static/media/question_mark.6ef0233c.png\";"],"sourceRoot":""}